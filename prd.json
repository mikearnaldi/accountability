{
  "project": "Accountability",
  "description": "Multi-company, multi-currency accounting application built on US GAAP principles",
  "version": "4.0.0",
  "created_at": "2026-01-10",
  "updated_at": "2026-01-15",
  "specs_dir": "specs/",
  "available_specs": [
    "DOMAIN_MODEL.md",
    "ACCOUNTING_RESEARCH.md",
    "EFFECT_BEST_PRACTICES.md",
    "EFFECT_SQL.md",
    "EFFECT_LAYERS.md",
    "EFFECT_TESTING.md",
    "HTTP_API_TANSTACK.md",
    "API_BEST_PRACTICES.md",
    "AUTHENTICATION.md",
    "E2E_TESTING.md",
    "REACT_BEST_PRACTICES.md",
    "USABILITY_BEST_PRACTICES.md"
  ],
  "architecture": {
    "principle": "Effect on server only. Pure React + generated fetch client on frontend.",
    "backend": {
      "packages": [
        "core",
        "persistence",
        "api"
      ],
      "stack": "Effect for type-safe business logic, @effect/sql for database, HttpApi for REST endpoints",
      "testing": "@effect/vitest for unit/integration tests"
    },
    "frontend": {
      "package": "web",
      "stack": "TanStack Start + React + Tailwind CSS + openapi-fetch client",
      "state": "React useState/useReducer for local state. Server state via loaders.",
      "no_effect": "NO Effect code in frontend. Plain fetch via generated openapi-fetch client.",
      "testing": "Playwright for E2E tests"
    },
    "api_client": {
      "generation": "pnpm generate:api in packages/web",
      "tools": "openapi-typescript generates types, openapi-fetch provides typed client",
      "output": [
        "src/api/schema.ts",
        "src/api/client.ts"
      ],
      "usage": "import { api } from '@/api/client'; await api.GET('/api/v1/organizations')",
      "cookie_auth": {
        "principle": "httpOnly cookies ONLY. localStorage is FORBIDDEN.",
        "ssr": "Forward cookie from request.headers.get('cookie') to api client",
        "client": "Cookies sent automatically via credentials: 'include'"
      }
    }
  },
  "testing_policy": {
    "mandatory": "EVERY story MUST include tests. A story is NOT complete without passing tests.",
    "ui_changes": "E2E tests in packages/web/test-e2e/",
    "api_changes": "Unit/integration tests using @effect/vitest",
    "verification": "Run 'pnpm test && pnpm test:e2e' before marking any story complete."
  },
  "api_coverage": {
    "implemented": {
      "auth": [
        "POST /api/auth/register",
        "POST /api/auth/login",
        "POST /api/auth/logout",
        "GET /api/auth/me"
      ],
      "organizations": [
        "GET /api/v1/organizations",
        "GET /api/v1/organizations/:id",
        "POST /api/v1/organizations",
        "PUT /api/v1/organizations/:id",
        "DELETE /api/v1/organizations/:id"
      ],
      "companies": [
        "GET /api/v1/companies",
        "GET /api/v1/companies/:id",
        "POST /api/v1/companies",
        "PUT /api/v1/companies/:id",
        "DELETE /api/v1/companies/:id"
      ],
      "accounts": [
        "GET /api/v1/accounts",
        "GET /api/v1/accounts/:id",
        "POST /api/v1/accounts",
        "PUT /api/v1/accounts/:id",
        "DELETE /api/v1/accounts/:id"
      ],
      "journal_entries": [
        "GET /api/v1/journal-entries",
        "GET /api/v1/journal-entries/:id",
        "POST /api/v1/journal-entries",
        "PUT /api/v1/journal-entries/:id",
        "DELETE /api/v1/journal-entries/:id",
        "POST /api/v1/journal-entries/:id/submit",
        "POST /api/v1/journal-entries/:id/approve",
        "POST /api/v1/journal-entries/:id/reject",
        "POST /api/v1/journal-entries/:id/post",
        "POST /api/v1/journal-entries/:id/reverse"
      ],
      "fiscal": [
        "GET /api/v1/fiscal/fiscal-years",
        "POST /api/v1/fiscal/fiscal-years",
        "GET /api/v1/fiscal/fiscal-periods",
        "POST /api/v1/fiscal/fiscal-periods/:id/open",
        "POST /api/v1/fiscal/fiscal-periods/:id/close",
        "POST /api/v1/fiscal/fiscal-periods/:id/soft-close",
        "POST /api/v1/fiscal/fiscal-periods/:id/reopen"
      ],
      "exchange_rates": [
        "GET /api/v1/exchange-rates",
        "POST /api/v1/exchange-rates",
        "POST /api/v1/exchange-rates/bulk",
        "DELETE /api/v1/exchange-rates/:id",
        "GET /api/v1/exchange-rates/by-date",
        "GET /api/v1/exchange-rates/latest"
      ],
      "consolidation": [
        "GET /api/v1/consolidation/groups",
        "POST /api/v1/consolidation/groups",
        "PUT /api/v1/consolidation/groups/:id",
        "DELETE /api/v1/consolidation/groups/:id",
        "POST /api/v1/consolidation/groups/:id/members",
        "DELETE /api/v1/consolidation/groups/:id/members/:companyId",
        "GET /api/v1/consolidation/runs",
        "POST /api/v1/consolidation/runs",
        "GET /api/v1/consolidation/runs/:id/trial-balance"
      ],
      "elimination_rules": [
        "GET /api/v1/elimination-rules",
        "POST /api/v1/elimination-rules",
        "PUT /api/v1/elimination-rules/:id",
        "DELETE /api/v1/elimination-rules/:id"
      ],
      "intercompany": [
        "GET /api/v1/intercompany-transactions",
        "POST /api/v1/intercompany-transactions",
        "PUT /api/v1/intercompany-transactions/:id",
        "DELETE /api/v1/intercompany-transactions/:id"
      ],
      "reports": [
        "GET /api/v1/reports/trial-balance",
        "GET /api/v1/reports/balance-sheet",
        "GET /api/v1/reports/income-statement",
        "GET /api/v1/reports/cash-flow",
        "GET /api/v1/reports/equity-statement"
      ]
    },
    "not_implemented": [
      "GET /api/v1/currencies - Currency master data",
      "GET /api/v1/jurisdictions - Jurisdiction master data",
      "GET /api/v1/account-templates - Chart of accounts templates",
      "GET /api/v1/audit-log - Audit trail queries"
    ]
  },
  "stories": [
    {
      "id": "1.1",
      "epic": "API: Reference Data",
      "title": "Currency master data endpoint",
      "description": "Add API endpoint to list available currencies for UI dropdowns. The Currency domain entity already exists with COMMON_CURRENCIES predefined.",
      "specs": [
        "DOMAIN_MODEL.md",
        "API_BEST_PRACTICES.md"
      ],
      "acceptance_criteria": [
        "GET /api/v1/currencies returns list of currencies",
        "Response schema: { currencies: [{ code, name, symbol, decimalPlaces, isActive }] }",
        "Filter by isActive query parameter (default: true)",
        "Returns predefined COMMON_CURRENCIES from Currency.ts",
        "Unit tests for endpoint"
      ],
      "api": {
        "endpoint": "GET /api/v1/currencies",
        "response": {
          "currencies": [
            {
              "code": "USD",
              "name": "US Dollar",
              "symbol": "$",
              "decimalPlaces": 2,
              "isActive": true
            }
          ]
        }
      },
      "files": {
        "create": [
          "packages/api/src/Api/CurrencyApi.ts",
          "packages/api/src/Handlers/CurrencyApiHandler.ts",
          "packages/api/test/CurrencyApi.test.ts"
        ],
        "reference": [
          "packages/core/src/Domains/Currency.ts"
        ]
      },
      "status": "complete"
    },
    {
      "id": "1.2",
      "epic": "API: Reference Data",
      "title": "Jurisdiction master data endpoint",
      "description": "Add API endpoint to list available jurisdictions for UI dropdowns. The Jurisdiction domain entity already exists with PREDEFINED_JURISDICTIONS.",
      "specs": [
        "DOMAIN_MODEL.md",
        "API_BEST_PRACTICES.md"
      ],
      "acceptance_criteria": [
        "GET /api/v1/jurisdictions returns list of jurisdictions",
        "Response schema: { jurisdictions: [{ code, name, defaultCurrency }] }",
        "Returns predefined jurisdictions (US, GB, etc.)",
        "Unit tests for endpoint"
      ],
      "api": {
        "endpoint": "GET /api/v1/jurisdictions",
        "response": {
          "jurisdictions": [
            {
              "code": "US",
              "name": "United States",
              "defaultCurrency": "USD"
            }
          ]
        }
      },
      "files": {
        "create": [
          "packages/api/src/Api/JurisdictionApi.ts",
          "packages/api/src/Handlers/JurisdictionApiHandler.ts",
          "packages/api/test/JurisdictionApi.test.ts"
        ],
        "reference": [
          "packages/core/src/Domains/Jurisdiction.ts"
        ]
      },
      "status": "complete"
    },
    {
      "id": "1.3",
      "epic": "API: Reference Data",
      "title": "Account templates endpoint",
      "description": "Add API endpoints to list and apply chart of accounts templates. The AccountTemplate domain entity already exists with templates for GeneralBusiness, Manufacturing, ServiceBusiness, and HoldingCompany.",
      "specs": [
        "DOMAIN_MODEL.md",
        "API_BEST_PRACTICES.md"
      ],
      "acceptance_criteria": [
        "GET /api/v1/account-templates returns list of available templates",
        "Response: { templates: [{ templateType, name, description, accountCount }] }",
        "GET /api/v1/account-templates/:type returns template with all account definitions",
        "Response: { template: { templateType, name, description, accounts: [...] } }",
        "POST /api/v1/account-templates/:type/apply applies template to a company",
        "Request: { companyId: UUID }",
        "Creates all accounts from template for the specified company",
        "Returns created accounts count",
        "Unit tests for all endpoints"
      ],
      "api": {
        "endpoints": [
          "GET /api/v1/account-templates",
          "GET /api/v1/account-templates/:type",
          "POST /api/v1/account-templates/:type/apply"
        ],
        "template_types": [
          "GeneralBusiness",
          "Manufacturing",
          "ServiceBusiness",
          "HoldingCompany"
        ]
      },
      "files": {
        "create": [
          "packages/api/src/Api/AccountTemplateApi.ts",
          "packages/api/src/Handlers/AccountTemplateApiHandler.ts",
          "packages/api/test/AccountTemplateApi.test.ts"
        ],
        "reference": [
          "packages/core/src/Domains/AccountTemplate.ts"
        ]
      },
      "status": "complete"
    },
    {
      "id": "1.4",
      "epic": "API: Reference Data",
      "title": "Audit log query endpoint",
      "description": "Add API endpoint to query audit trail entries for compliance and SOX requirements. Tracks changes to all entities with user, timestamp, and before/after values.",
      "specs": [
        "DOMAIN_MODEL.md",
        "API_BEST_PRACTICES.md"
      ],
      "acceptance_criteria": [
        "GET /api/v1/audit-log returns paginated audit entries",
        "Query parameters: entityType, entityId, userId, action, fromDate, toDate, limit, offset",
        "Response: { entries: [{ id, entityType, entityId, action, userId, timestamp, changes }], total }",
        "Actions: Create, Update, Delete, StatusChange",
        "Entity types: Organization, Company, Account, JournalEntry, FiscalPeriod, etc.",
        "Changes field shows before/after values for updates",
        "Read-only endpoint (audit entries are system-generated)",
        "Unit tests for endpoint"
      ],
      "api": {
        "endpoint": "GET /api/v1/audit-log",
        "query_params": [
          "entityType",
          "entityId",
          "userId",
          "action",
          "fromDate",
          "toDate",
          "limit",
          "offset"
        ],
        "response": {
          "entries": [
            {
              "id": "uuid",
              "entityType": "JournalEntry",
              "entityId": "uuid",
              "action": "StatusChange",
              "userId": "uuid",
              "timestamp": "2026-01-15T10:30:00Z",
              "changes": {
                "status": {
                  "from": "Draft",
                  "to": "Posted"
                }
              }
            }
          ],
          "total": 100
        }
      },
      "files": {
        "create": [
          "packages/api/src/Api/AuditLogApi.ts",
          "packages/api/src/Handlers/AuditLogApiHandler.ts",
          "packages/persistence/src/Repositories/AuditLogRepository.ts",
          "packages/api/test/AuditLogApi.test.ts"
        ]
      },
      "status": "complete"
    },
    {
      "id": "2.1",
      "epic": "UI: Design System",
      "title": "Layout with organization context selector",
      "description": "Create layout with Organization as global context. Organization is the tenant - all other entities (Companies, Accounts, Journal Entries, Reports, etc.) are scoped within the selected organization.",
      "specs": [
        "DOMAIN_MODEL.md",
        "REACT_BEST_PRACTICES.md",
        "USABILITY_BEST_PRACTICES.md"
      ],
      "acceptance_criteria": [
        "Entity Hierarchy (critical to understand):",
        "  Organization (tenant) → Companies → Accounts, Journal Entries, Fiscal Periods",
        "  Organization → Exchange Rates, Consolidation Groups, Intercompany Transactions",
        "Header:",
        "  - Organization selector dropdown (switch between orgs user has access to)",
        "  - Shows current org name prominently",
        "  - User menu with logout",
        "  - NO search/notifications (no API)",
        "Sidebar (context-aware, scoped to selected organization):",
        "  - Dashboard (org overview)",
        "  - Companies (list companies in this org)",
        "  - Exchange Rates (org-level)",
        "  - Consolidation (org-level groups)",
        "  - Intercompany (org-level transactions)",
        "  - Audit Log (org-level)",
        "  - Settings (org settings)",
        "When no organization selected: Show organization list/selector",
        "Store selected org in URL path: /organizations/:orgId/...",
        "Breadcrumbs: Organization > [current section]",
        "Shared UI components: Card, Table, Button, Input, Select",
        "State components: LoadingState, EmptyState, ErrorState",
        "Responsive: Desktop, tablet, mobile",
        "All components have data-testid attributes"
      ],
      "navigation_structure": {
        "no_org_selected": "/organizations → list to select",
        "org_selected": "/organizations/:orgId/dashboard → scoped views",
        "company_selected": "/organizations/:orgId/companies/:companyId/... → company-specific views"
      },
      "files": {
        "create": [
          "packages/web/src/components/layout/AppLayout.tsx",
          "packages/web/src/components/layout/OrganizationSelector.tsx",
          "packages/web/src/components/layout/Breadcrumbs.tsx",
          "packages/web/src/components/ui/Card.tsx",
          "packages/web/src/components/ui/Table.tsx",
          "packages/web/src/components/ui/Button.tsx",
          "packages/web/src/components/ui/Input.tsx",
          "packages/web/src/components/ui/Select.tsx",
          "packages/web/src/components/ui/LoadingState.tsx",
          "packages/web/src/components/ui/EmptyState.tsx",
          "packages/web/src/components/ui/ErrorState.tsx"
        ],
        "modify": [
          "packages/web/src/components/layout/Sidebar.tsx",
          "packages/web/src/components/layout/Header.tsx"
        ]
      },
      "status": "complete"
    },
    {
      "id": "2.2",
      "epic": "UI: Design System",
      "title": "Organization-scoped dashboard",
      "description": "Dashboard showing overview of selected organization. All data is scoped to the current organization context.",
      "specs": [
        "DOMAIN_MODEL.md",
        "REACT_BEST_PRACTICES.md",
        "USABILITY_BEST_PRACTICES.md",
        "E2E_TESTING.md"
      ],
      "acceptance_criteria": [
        "Route: /organizations/:organizationId/dashboard",
        "Requires organization to be selected (redirect if not)",
        "Organization header: Name, reporting currency, settings summary",
        "Summary cards (all scoped to current org):",
        "  - Companies count in this org",
        "  - Total accounts across all companies",
        "  - Journal entries pending approval",
        "  - Open fiscal periods",
        "Quick actions:",
        "  - Create Company",
        "  - View Companies",
        "  - View Exchange Rates",
        "  - Run Consolidation",
        "Recent activity section (placeholder until audit log API ready)",
        "NO search bar (no search API)",
        "NO notifications (no notifications API)",
        "E2E test: Dashboard loads with org-scoped data"
      ],
      "api": {
        "calls": [
          "GET /api/v1/organizations/:id",
          "GET /api/v1/companies?organizationId=:id",
          "GET /api/v1/journal-entries?organizationId=:id&status=PendingApproval",
          "GET /api/v1/fiscal/fiscal-periods?organizationId=:id&status=Open"
        ]
      },
      "files": {
        "create": [
          "packages/web/src/routes/organizations/$organizationId/dashboard.tsx"
        ],
        "modify": [
          "packages/web/src/routes/index.tsx"
        ]
      },
      "status": "complete"
    },
    {
      "id": "3.1",
      "epic": "UI: Organizations",
      "title": "Organization selection and list",
      "description": "Entry point for selecting an organization. This is the first screen after login - user must select an org to access org-scoped features.",
      "specs": [
        "DOMAIN_MODEL.md",
        "REACT_BEST_PRACTICES.md",
        "E2E_TESTING.md"
      ],
      "acceptance_criteria": [
        "Route: /organizations (no org selected yet)",
        "Purpose: Select which organization to work with",
        "Card-based layout showing user's organizations:",
        "  - Organization name (prominent)",
        "  - Reporting currency",
        "  - Companies count",
        "  - Last accessed date",
        "Click card → navigate to /organizations/:id/dashboard",
        "Create new organization button",
        "If user has only 1 org: Auto-redirect to that org's dashboard",
        "If user has 0 orgs: Show create organization prompt",
        "Search/filter orgs (client-side for small lists)",
        "E2E test: Select organization flow"
      ],
      "api": {
        "calls": [
          "GET /api/v1/organizations"
        ]
      },
      "files": {
        "modify": [
          "packages/web/src/routes/organizations/index.tsx"
        ]
      },
      "status": "complete"
    },
    {
      "id": "3.2",
      "epic": "UI: Organizations",
      "title": "Create organization form",
      "description": "Form to create new organization with all API-supported fields.",
      "specs": [
        "DOMAIN_MODEL.md",
        "REACT_BEST_PRACTICES.md",
        "E2E_TESTING.md"
      ],
      "acceptance_criteria": [
        "Form fields:",
        "  - Name (required)",
        "  - Reporting Currency (dropdown from /api/v1/currencies)",
        "  - Settings (collapsible):",
        "    - Default Locale",
        "    - Default Timezone",
        "    - Use Fiscal Year (checkbox)",
        "    - Default Decimal Places (0-4)",
        "Client-side validation",
        "Submit via api.POST('/api/v1/organizations')",
        "Success: Navigate to organization detail",
        "Error: Show inline validation errors",
        "E2E test: Create organization flow"
      ],
      "api": {
        "calls": [
          "GET /api/v1/currencies",
          "POST /api/v1/organizations"
        ],
        "request": {
          "name": "string",
          "reportingCurrency": "CurrencyCode",
          "settings": {
            "defaultLocale": "string",
            "defaultTimezone": "string",
            "useFiscalYear": "boolean",
            "defaultDecimalPlaces": "number"
          }
        }
      },
      "files": {
        "create": [
          "packages/web/src/routes/organizations/new.tsx",
          "packages/web/src/components/forms/OrganizationForm.tsx",
          "packages/web/src/components/ui/CurrencySelect.tsx"
        ]
      },
      "status": "pending"
    },
    {
      "id": "3.3",
      "epic": "UI: Organizations",
      "title": "Organization settings page",
      "description": "Settings page for the current organization. Accessible from sidebar within org context.",
      "specs": [
        "DOMAIN_MODEL.md",
        "REACT_BEST_PRACTICES.md",
        "E2E_TESTING.md"
      ],
      "acceptance_criteria": [
        "Route: /organizations/:organizationId/settings",
        "Accessible from sidebar 'Settings' link",
        "General Settings section:",
        "  - Organization name (editable)",
        "  - Reporting currency (read-only after creation)",
        "  - Created date (read-only)",
        "Defaults section:",
        "  - Default locale",
        "  - Default timezone",
        "  - Use fiscal year",
        "  - Default decimal places",
        "Save changes button",
        "Danger zone:",
        "  - Delete organization (with confirmation, requires typing org name)",
        "  - Warning: Deletes all companies, accounts, entries, etc.",
        "E2E test: Edit organization settings"
      ],
      "api": {
        "calls": [
          "GET /api/v1/organizations/:id",
          "PUT /api/v1/organizations/:id",
          "DELETE /api/v1/organizations/:id"
        ]
      },
      "files": {
        "create": [
          "packages/web/src/routes/organizations/$organizationId/settings.tsx"
        ]
      },
      "status": "pending"
    },
    {
      "id": "4.1",
      "epic": "UI: Companies",
      "title": "Companies list with hierarchy",
      "description": "Display companies showing parent/child relationships for consolidation.",
      "specs": [
        "DOMAIN_MODEL.md",
        "REACT_BEST_PRACTICES.md",
        "E2E_TESTING.md"
      ],
      "acceptance_criteria": [
        "SSR loader fetches companies for organization",
        "Tree view showing parent/subsidiary hierarchy",
        "Columns: Name, Legal Name, Jurisdiction, Functional Currency, Status",
        "Subsidiaries indented under parent companies",
        "Show ownership % and consolidation method for subsidiaries",
        "Filter: Active/Inactive",
        "Create company button",
        "E2E test: Hierarchy displays correctly"
      ],
      "api": {
        "calls": [
          "GET /api/v1/companies?organizationId=:id"
        ]
      },
      "files": {
        "create": [
          "packages/web/src/components/company/CompanyHierarchyTree.tsx"
        ],
        "modify": [
          "packages/web/src/routes/organizations/$organizationId/companies/index.tsx"
        ]
      },
      "status": "pending"
    },
    {
      "id": "4.2",
      "epic": "UI: Companies",
      "title": "Create company form with hierarchy",
      "description": "Form to create company with all API fields including parent/subsidiary setup.",
      "specs": [
        "DOMAIN_MODEL.md",
        "ACCOUNTING_RESEARCH.md",
        "REACT_BEST_PRACTICES.md",
        "E2E_TESTING.md"
      ],
      "acceptance_criteria": [
        "Form sections:",
        "  Basic: Name, Legal Name, Jurisdiction (dropdown), Tax ID",
        "  Currency: Functional Currency, Reporting Currency",
        "  Fiscal Year: Month/Day pickers with presets (Dec 31, Mar 31)",
        "  Hierarchy (optional):",
        "    - Parent Company dropdown",
        "    - Ownership % (required if parent selected)",
        "    - Consolidation Method (Full/Equity/Cost/VIE)",
        "Validation: Ownership requires parent, method requires ownership",
        "Cannot set company as own parent",
        "E2E test: Create top-level and subsidiary company"
      ],
      "api": {
        "calls": [
          "GET /api/v1/jurisdictions",
          "GET /api/v1/currencies",
          "GET /api/v1/companies?organizationId=:id",
          "POST /api/v1/companies"
        ],
        "request": {
          "organizationId": "UUID",
          "name": "string",
          "legalName": "string",
          "jurisdiction": "JurisdictionCode",
          "taxId": "string (optional)",
          "functionalCurrency": "CurrencyCode",
          "reportingCurrency": "CurrencyCode",
          "fiscalYearEnd": {
            "month": "1-12",
            "day": "1-31"
          },
          "parentCompanyId": "UUID (optional)",
          "ownershipPercentage": "0-100 (optional)",
          "consolidationMethod": "FullConsolidation|EquityMethod|CostMethod|VariableInterestEntity (optional)"
        }
      },
      "files": {
        "create": [
          "packages/web/src/components/forms/CompanyForm.tsx",
          "packages/web/src/components/ui/JurisdictionSelect.tsx",
          "packages/web/src/components/ui/FiscalYearEndPicker.tsx",
          "packages/web/src/components/ui/ConsolidationMethodSelect.tsx"
        ]
      },
      "status": "pending"
    },
    {
      "id": "4.3",
      "epic": "UI: Companies",
      "title": "Company detail and edit",
      "description": "View company details with edit and quick navigation to related features.",
      "specs": [
        "DOMAIN_MODEL.md",
        "REACT_BEST_PRACTICES.md",
        "E2E_TESTING.md"
      ],
      "acceptance_criteria": [
        "Header: Name, status badge, jurisdiction",
        "Info cards: Currencies, Fiscal Year, Hierarchy position",
        "If parent: Show subsidiaries list with ownership %",
        "If subsidiary: Show parent with ownership info",
        "Edit form (cannot change functionalCurrency - ASC 830)",
        "Deactivate/Activate button",
        "Quick links: Chart of Accounts, Journal Entries, Reports, Fiscal Periods",
        "E2E test: View and edit company"
      ],
      "api": {
        "calls": [
          "GET /api/v1/companies/:id",
          "GET /api/v1/companies?parentCompanyId=:id",
          "PUT /api/v1/companies/:id",
          "DELETE /api/v1/companies/:id"
        ]
      },
      "files": {
        "modify": [
          "packages/web/src/routes/organizations/$organizationId/companies/$companyId/index.tsx"
        ]
      },
      "status": "pending"
    },
    {
      "id": "5.1",
      "epic": "UI: Chart of Accounts",
      "title": "Accounts list with hierarchy",
      "description": "Display company's chart of accounts with parent/child hierarchy.",
      "specs": [
        "DOMAIN_MODEL.md",
        "ACCOUNTING_RESEARCH.md",
        "REACT_BEST_PRACTICES.md",
        "E2E_TESTING.md"
      ],
      "acceptance_criteria": [
        "SSR loader fetches accounts for company",
        "Tree view showing account hierarchy",
        "Columns: Number, Name, Type, Category, Normal Balance, Status",
        "Account type color coding (Asset=blue, Liability=red, etc.)",
        "Filter by: Account Type, Active/Inactive, Postable only",
        "Search by account number or name",
        "Create account button",
        "E2E test: Accounts tree displays correctly"
      ],
      "api": {
        "calls": [
          "GET /api/v1/accounts?companyId=:id"
        ]
      },
      "account_number_ranges": {
        "1000-1999": "Assets",
        "2000-2999": "Liabilities",
        "3000-3999": "Equity",
        "4000-4999": "Revenue",
        "5000-7999": "Expenses"
      },
      "files": {
        "create": [
          "packages/web/src/routes/organizations/$organizationId/companies/$companyId/accounts/index.tsx",
          "packages/web/src/components/accounts/AccountTree.tsx"
        ]
      },
      "status": "pending"
    },
    {
      "id": "5.2",
      "epic": "UI: Chart of Accounts",
      "title": "Create and edit account form",
      "description": "Form to create and edit GL accounts with all API fields.",
      "specs": [
        "DOMAIN_MODEL.md",
        "ACCOUNTING_RESEARCH.md",
        "REACT_BEST_PRACTICES.md",
        "E2E_TESTING.md"
      ],
      "acceptance_criteria": [
        "Form fields:",
        "  - Account Number (4-digit, validated for type range)",
        "  - Name",
        "  - Description (optional)",
        "  - Account Type (Asset/Liability/Equity/Revenue/Expense)",
        "  - Account Category (subcategory for type)",
        "  - Normal Balance (auto-set, can override for contra accounts)",
        "  - Parent Account (optional, for sub-accounts)",
        "  - Is Postable (checkbox)",
        "  - Is Cash Flow Relevant (checkbox)",
        "  - Cash Flow Category (if relevant)",
        "  - Is Intercompany (checkbox)",
        "Account number validation: 1xxx=Asset, 2xxx=Liability, etc.",
        "E2E test: Create account in hierarchy"
      ],
      "api": {
        "calls": [
          "GET /api/v1/accounts?companyId=:id",
          "POST /api/v1/accounts",
          "PUT /api/v1/accounts/:id"
        ],
        "request": {
          "companyId": "UUID",
          "accountNumber": "string (4-digit)",
          "name": "string",
          "description": "string (optional)",
          "accountType": "Asset|Liability|Equity|Revenue|Expense",
          "accountCategory": "enum",
          "normalBalance": "Debit|Credit",
          "parentAccountId": "UUID (optional)",
          "isPostable": "boolean",
          "isCashFlowRelevant": "boolean",
          "cashFlowCategory": "Operating|Investing|Financing (optional)",
          "isIntercompany": "boolean"
        }
      },
      "files": {
        "create": [
          "packages/web/src/routes/organizations/$organizationId/companies/$companyId/accounts/new.tsx",
          "packages/web/src/components/forms/AccountForm.tsx"
        ]
      },
      "status": "pending"
    },
    {
      "id": "5.3",
      "epic": "UI: Chart of Accounts",
      "title": "Apply account template",
      "description": "Allow users to bootstrap a company's chart of accounts from a predefined template. Useful for new companies.",
      "specs": [
        "DOMAIN_MODEL.md",
        "ACCOUNTING_RESEARCH.md",
        "REACT_BEST_PRACTICES.md",
        "E2E_TESTING.md"
      ],
      "acceptance_criteria": [
        "Show 'Apply Template' button on empty accounts page",
        "Template selection modal with:",
        "  - List of available templates with descriptions",
        "  - Preview of account count per template",
        "  - Template types: General Business, Manufacturing, Service Business, Holding Company",
        "Confirmation before applying (warns this creates many accounts)",
        "Apply template via POST /api/v1/account-templates/:type/apply",
        "Show success with count of created accounts",
        "Refresh accounts list after apply",
        "E2E test: Apply template to new company"
      ],
      "api": {
        "calls": [
          "GET /api/v1/account-templates",
          "POST /api/v1/account-templates/:type/apply"
        ]
      },
      "files": {
        "create": [
          "packages/web/src/components/accounts/ApplyTemplateModal.tsx"
        ],
        "modify": [
          "packages/web/src/routes/organizations/$organizationId/companies/$companyId/accounts/index.tsx"
        ]
      },
      "status": "pending"
    },
    {
      "id": "6.1",
      "epic": "UI: Journal Entries",
      "title": "Journal entries list with filters",
      "description": "List journal entries with status-based filtering and pagination.",
      "specs": [
        "DOMAIN_MODEL.md",
        "ACCOUNTING_RESEARCH.md",
        "REACT_BEST_PRACTICES.md",
        "E2E_TESTING.md"
      ],
      "acceptance_criteria": [
        "SSR loader fetches entries with pagination",
        "Columns: Entry #, Date, Reference, Description, Total, Status",
        "Status badges: Draft (gray), PendingApproval (yellow), Approved (blue), Posted (green), Reversed (red)",
        "Filter by: Status, Entry Type, Date Range",
        "Create entry button",
        "Click row to view detail",
        "E2E test: List with filters"
      ],
      "api": {
        "calls": [
          "GET /api/v1/journal-entries?companyId=:id&status=:status&limit=:limit&offset=:offset"
        ]
      },
      "files": {
        "create": [
          "packages/web/src/routes/organizations/$organizationId/companies/$companyId/journal-entries/index.tsx"
        ]
      },
      "status": "pending"
    },
    {
      "id": "6.2",
      "epic": "UI: Journal Entries",
      "title": "Create journal entry form",
      "description": "Multi-line journal entry creation with real-time balance validation.",
      "specs": [
        "DOMAIN_MODEL.md",
        "ACCOUNTING_RESEARCH.md",
        "REACT_BEST_PRACTICES.md",
        "E2E_TESTING.md"
      ],
      "acceptance_criteria": [
        "Header fields: Date, Reference, Description, Entry Type",
        "Line items table: Account dropdown, Memo, Debit, Credit",
        "Account dropdown searches postable accounts",
        "Add/remove lines dynamically (minimum 2)",
        "Running totals row",
        "Balance indicator: green=balanced, red=unbalanced",
        "Cannot submit if unbalanced (debits ≠ credits)",
        "Multi-currency: Currency selector, exchange rate field",
        "Save as Draft button",
        "Submit for Approval button (only if balanced)",
        "E2E test: Create balanced entry"
      ],
      "api": {
        "calls": [
          "GET /api/v1/accounts?companyId=:id&isPostable=true",
          "POST /api/v1/journal-entries"
        ]
      },
      "files": {
        "create": [
          "packages/web/src/routes/organizations/$organizationId/companies/$companyId/journal-entries/new.tsx",
          "packages/web/src/components/forms/JournalEntryForm.tsx",
          "packages/web/src/components/journal/JournalEntryLineEditor.tsx"
        ]
      },
      "status": "pending"
    },
    {
      "id": "6.3",
      "epic": "UI: Journal Entries",
      "title": "Journal entry detail and workflow",
      "description": "View entry details with approval workflow actions based on status.",
      "specs": [
        "DOMAIN_MODEL.md",
        "ACCOUNTING_RESEARCH.md",
        "REACT_BEST_PRACTICES.md",
        "E2E_TESTING.md"
      ],
      "acceptance_criteria": [
        "Header: Entry #, Date, Reference, Type, Status badge",
        "Metadata: Created by, Created at, Posted by, Posted at",
        "Line items table (read-only for non-draft)",
        "Workflow buttons by status:",
        "  - Draft: Edit, Submit for Approval, Delete",
        "  - PendingApproval: Approve, Reject (with reason)",
        "  - Approved: Post",
        "  - Posted: Reverse (creates reversing entry)",
        "  - Reversed: View only, link to reversing entry",
        "E2E test: Complete approval workflow (draft → posted)"
      ],
      "api": {
        "calls": [
          "GET /api/v1/journal-entries/:id",
          "PUT /api/v1/journal-entries/:id",
          "DELETE /api/v1/journal-entries/:id",
          "POST /api/v1/journal-entries/:id/submit",
          "POST /api/v1/journal-entries/:id/approve",
          "POST /api/v1/journal-entries/:id/reject",
          "POST /api/v1/journal-entries/:id/post",
          "POST /api/v1/journal-entries/:id/reverse"
        ]
      },
      "files": {
        "create": [
          "packages/web/src/routes/organizations/$organizationId/companies/$companyId/journal-entries/$entryId/index.tsx"
        ]
      },
      "status": "pending"
    },
    {
      "id": "7.1",
      "epic": "UI: Financial Reports",
      "title": "Reports dashboard",
      "description": "Landing page with cards for each available report type.",
      "specs": [
        "DOMAIN_MODEL.md",
        "REACT_BEST_PRACTICES.md",
        "E2E_TESTING.md"
      ],
      "acceptance_criteria": [
        "Cards for each report:",
        "  - Trial Balance: Account balances verification",
        "  - Balance Sheet: Assets = Liabilities + Equity (ASC 210)",
        "  - Income Statement: Revenue - Expenses = Net Income (ASC 220)",
        "  - Cash Flow Statement: Operating/Investing/Financing (ASC 230)",
        "  - Statement of Changes in Equity",
        "Quick date picker for common periods",
        "Click card navigates to report with date pre-filled",
        "E2E test: Reports dashboard"
      ],
      "api": {
        "available_reports": [
          "GET /api/v1/reports/trial-balance",
          "GET /api/v1/reports/balance-sheet",
          "GET /api/v1/reports/income-statement",
          "GET /api/v1/reports/cash-flow",
          "GET /api/v1/reports/equity-statement"
        ]
      },
      "files": {
        "create": [
          "packages/web/src/routes/organizations/$organizationId/companies/$companyId/reports/index.tsx"
        ]
      },
      "status": "pending"
    },
    {
      "id": "7.2",
      "epic": "UI: Financial Reports",
      "title": "Trial Balance report",
      "description": "Generate and display trial balance with debit/credit columns.",
      "specs": [
        "DOMAIN_MODEL.md",
        "ACCOUNTING_RESEARCH.md",
        "REACT_BEST_PRACTICES.md",
        "E2E_TESTING.md"
      ],
      "acceptance_criteria": [
        "Date picker: As-of date",
        "Generate button calls API",
        "Table: Account Number, Name, Type, Debit Balance, Credit Balance",
        "Total row showing sum (must balance)",
        "Filter: By account type, hide zero balances",
        "Export: PDF, Excel, CSV",
        "E2E test: Trial balance totals balance"
      ],
      "api": {
        "call": "GET /api/v1/reports/trial-balance?companyId=:id&asOfDate=:date"
      },
      "files": {
        "create": [
          "packages/web/src/routes/organizations/$organizationId/companies/$companyId/reports/trial-balance.tsx",
          "packages/web/src/components/reports/TrialBalanceTable.tsx"
        ]
      },
      "status": "pending"
    },
    {
      "id": "7.3",
      "epic": "UI: Financial Reports",
      "title": "Balance Sheet report",
      "description": "Generate and display balance sheet per ASC 210.",
      "specs": [
        "DOMAIN_MODEL.md",
        "ACCOUNTING_RESEARCH.md",
        "REACT_BEST_PRACTICES.md",
        "E2E_TESTING.md"
      ],
      "acceptance_criteria": [
        "Date picker: As-of date, optional comparative date",
        "Sections: Assets (Current/Non-Current), Liabilities (Current/Non-Current), Equity",
        "Subtotals for each section",
        "Total Assets = Total Liabilities + Equity (must balance)",
        "Comparative columns if second date selected",
        "Variance column (amount and %)",
        "Export: PDF, Excel, CSV",
        "E2E test: Balance sheet balances"
      ],
      "api": {
        "call": "GET /api/v1/reports/balance-sheet?companyId=:id&asOfDate=:date&comparativeDate=:date"
      },
      "files": {
        "create": [
          "packages/web/src/routes/organizations/$organizationId/companies/$companyId/reports/balance-sheet.tsx"
        ]
      },
      "status": "pending"
    },
    {
      "id": "7.4",
      "epic": "UI: Financial Reports",
      "title": "Income Statement report",
      "description": "Generate and display income statement per ASC 220.",
      "specs": [
        "DOMAIN_MODEL.md",
        "ACCOUNTING_RESEARCH.md",
        "REACT_BEST_PRACTICES.md",
        "E2E_TESTING.md"
      ],
      "acceptance_criteria": [
        "Date range picker: Period start and end",
        "Optional comparative period",
        "Sections: Revenue, Cost of Sales, Operating Expenses, Other Income/Expense",
        "Calculated lines: Gross Profit, Operating Income, Net Income",
        "Comparative columns, variance column",
        "Export: PDF, Excel, CSV",
        "E2E test: Income statement calculations"
      ],
      "api": {
        "call": "GET /api/v1/reports/income-statement?companyId=:id&periodStartDate=:date&periodEndDate=:date"
      },
      "files": {
        "create": [
          "packages/web/src/routes/organizations/$organizationId/companies/$companyId/reports/income-statement.tsx"
        ]
      },
      "status": "pending"
    },
    {
      "id": "7.5",
      "epic": "UI: Financial Reports",
      "title": "Cash Flow Statement report",
      "description": "Generate and display cash flow statement per ASC 230.",
      "specs": [
        "DOMAIN_MODEL.md",
        "ACCOUNTING_RESEARCH.md",
        "REACT_BEST_PRACTICES.md",
        "E2E_TESTING.md"
      ],
      "acceptance_criteria": [
        "Date range picker",
        "Method selector: Direct or Indirect",
        "Sections: Operating, Investing, Financing Activities",
        "Beginning cash + Net change = Ending cash reconciliation",
        "Export: PDF, Excel, CSV",
        "E2E test: Cash flow reconciles"
      ],
      "api": {
        "call": "GET /api/v1/reports/cash-flow?companyId=:id&periodStartDate=:date&periodEndDate=:date&method=:method"
      },
      "files": {
        "create": [
          "packages/web/src/routes/organizations/$organizationId/companies/$companyId/reports/cash-flow.tsx"
        ]
      },
      "status": "pending"
    },
    {
      "id": "7.6",
      "epic": "UI: Financial Reports",
      "title": "Statement of Changes in Equity report",
      "description": "Generate and display equity statement showing period movements.",
      "specs": [
        "DOMAIN_MODEL.md",
        "ACCOUNTING_RESEARCH.md",
        "REACT_BEST_PRACTICES.md",
        "E2E_TESTING.md"
      ],
      "acceptance_criteria": [
        "Date range picker",
        "Columns: Common Stock, APIC, Retained Earnings, Treasury Stock, AOCI, Total",
        "Rows: Opening Balance, Net Income, Dividends, Stock transactions, Closing Balance",
        "Export: PDF, Excel, CSV",
        "E2E test: Equity statement balances"
      ],
      "api": {
        "call": "GET /api/v1/reports/equity-statement?companyId=:id&periodStartDate=:date&periodEndDate=:date"
      },
      "files": {
        "create": [
          "packages/web/src/routes/organizations/$organizationId/companies/$companyId/reports/equity-statement.tsx"
        ]
      },
      "status": "pending"
    },
    {
      "id": "8.1",
      "epic": "UI: Fiscal Periods",
      "title": "Fiscal years and periods management",
      "description": "Manage fiscal years and period lifecycle (open/close/reopen).",
      "specs": [
        "DOMAIN_MODEL.md",
        "ACCOUNTING_RESEARCH.md",
        "REACT_BEST_PRACTICES.md",
        "E2E_TESTING.md"
      ],
      "acceptance_criteria": [
        "Fiscal years list with expandable periods (12 + adjustment period)",
        "Create fiscal year button (auto-generates periods)",
        "Period status indicators: Future, Open, SoftClose, Closed, Locked",
        "Current period highlighted",
        "Period actions by status:",
        "  - Future: Open",
        "  - Open: Soft Close",
        "  - SoftClose: Close or Reopen",
        "  - Closed: Lock or Reopen (with reason)",
        "  - Locked: View only",
        "Reopen modal with required reason field",
        "E2E test: Period lifecycle"
      ],
      "api": {
        "calls": [
          "GET /api/v1/fiscal/fiscal-years?companyId=:id",
          "POST /api/v1/fiscal/fiscal-years",
          "GET /api/v1/fiscal/fiscal-periods?fiscalYearId=:id",
          "POST /api/v1/fiscal/fiscal-periods/:id/open",
          "POST /api/v1/fiscal/fiscal-periods/:id/soft-close",
          "POST /api/v1/fiscal/fiscal-periods/:id/close",
          "POST /api/v1/fiscal/fiscal-periods/:id/reopen"
        ]
      },
      "files": {
        "create": [
          "packages/web/src/routes/organizations/$organizationId/companies/$companyId/fiscal/index.tsx",
          "packages/web/src/components/fiscal/FiscalYearList.tsx",
          "packages/web/src/components/fiscal/PeriodStatusBadge.tsx"
        ]
      },
      "status": "pending"
    },
    {
      "id": "9.1",
      "epic": "UI: Exchange Rates",
      "title": "Exchange rates management",
      "description": "Manage exchange rates with CRUD and bulk import.",
      "specs": [
        "DOMAIN_MODEL.md",
        "ACCOUNTING_RESEARCH.md",
        "REACT_BEST_PRACTICES.md",
        "E2E_TESTING.md"
      ],
      "acceptance_criteria": [
        "Rates list: From Currency, To Currency, Rate, Type, Effective Date",
        "Filter by: Currency pair, Rate type (Spot/Average/Closing), Date range",
        "Create single rate form",
        "Bulk import from CSV",
        "Delete rate",
        "Rate lookup tool: Get rate by date, latest, closest",
        "E2E test: Exchange rates CRUD"
      ],
      "api": {
        "calls": [
          "GET /api/v1/exchange-rates?organizationId=:id",
          "POST /api/v1/exchange-rates",
          "POST /api/v1/exchange-rates/bulk",
          "DELETE /api/v1/exchange-rates/:id",
          "GET /api/v1/exchange-rates/by-date",
          "GET /api/v1/exchange-rates/latest"
        ]
      },
      "files": {
        "create": [
          "packages/web/src/routes/organizations/$organizationId/exchange-rates/index.tsx",
          "packages/web/src/components/forms/ExchangeRateForm.tsx"
        ]
      },
      "status": "pending"
    },
    {
      "id": "10.1",
      "epic": "UI: Consolidation",
      "title": "Consolidation groups list",
      "description": "List consolidation groups with member count and status.",
      "specs": [
        "DOMAIN_MODEL.md",
        "ACCOUNTING_RESEARCH.md",
        "REACT_BEST_PRACTICES.md",
        "E2E_TESTING.md"
      ],
      "acceptance_criteria": [
        "Groups list: Name, Parent Company, Reporting Currency, Member Count, Status",
        "Create consolidation group button",
        "Click row to view group detail",
        "Activate/deactivate toggle",
        "E2E test: Groups list"
      ],
      "api": {
        "calls": [
          "GET /api/v1/consolidation/groups?organizationId=:id"
        ]
      },
      "files": {
        "create": [
          "packages/web/src/routes/organizations/$organizationId/consolidation/index.tsx"
        ]
      },
      "status": "pending"
    },
    {
      "id": "10.2",
      "epic": "UI: Consolidation",
      "title": "Consolidation group detail and members",
      "description": "Manage consolidation group members with ownership and method.",
      "specs": [
        "DOMAIN_MODEL.md",
        "ACCOUNTING_RESEARCH.md",
        "REACT_BEST_PRACTICES.md",
        "E2E_TESTING.md"
      ],
      "acceptance_criteria": [
        "Header: Group name, parent company, reporting currency, status",
        "Members list: Company, Ownership %, Consolidation Method, Acquisition Date",
        "Add member: Company dropdown, ownership %, method",
        "Edit member ownership and method",
        "Remove member",
        "Link to elimination rules",
        "Link to consolidation runs",
        "E2E test: Member management"
      ],
      "api": {
        "calls": [
          "GET /api/v1/consolidation/groups/:id",
          "PUT /api/v1/consolidation/groups/:id",
          "POST /api/v1/consolidation/groups/:id/members",
          "DELETE /api/v1/consolidation/groups/:id/members/:companyId"
        ]
      },
      "files": {
        "create": [
          "packages/web/src/routes/organizations/$organizationId/consolidation/$groupId/index.tsx"
        ]
      },
      "status": "pending"
    },
    {
      "id": "10.3",
      "epic": "UI: Consolidation",
      "title": "Consolidation runs and results",
      "description": "Execute consolidation runs and view results.",
      "specs": [
        "DOMAIN_MODEL.md",
        "ACCOUNTING_RESEARCH.md",
        "REACT_BEST_PRACTICES.md",
        "E2E_TESTING.md"
      ],
      "acceptance_criteria": [
        "Runs list: Date, Period, Status, Initiated By",
        "Initiate new run: Period picker, as-of date",
        "Progress indicator during run",
        "Cancel in-progress run",
        "View completed run: Consolidated trial balance",
        "View elimination entries generated",
        "E2E test: Consolidation run workflow"
      ],
      "api": {
        "calls": [
          "GET /api/v1/consolidation/runs?groupId=:id",
          "POST /api/v1/consolidation/runs",
          "GET /api/v1/consolidation/runs/:id/trial-balance"
        ]
      },
      "files": {
        "create": [
          "packages/web/src/routes/organizations/$organizationId/consolidation/$groupId/runs/index.tsx",
          "packages/web/src/routes/organizations/$organizationId/consolidation/$groupId/runs/$runId.tsx"
        ]
      },
      "status": "pending"
    },
    {
      "id": "10.4",
      "epic": "UI: Consolidation",
      "title": "Elimination rules editor",
      "description": "Create and manage elimination rules for consolidation.",
      "specs": [
        "DOMAIN_MODEL.md",
        "ACCOUNTING_RESEARCH.md",
        "REACT_BEST_PRACTICES.md",
        "E2E_TESTING.md"
      ],
      "acceptance_criteria": [
        "Rules list: Name, Type, Debit Account, Credit Account, Status",
        "Filter by type and status",
        "Create rule form: Name, type, account selectors",
        "Edit rule",
        "Activate/deactivate rule",
        "Delete rule",
        "E2E test: Elimination rules CRUD"
      ],
      "elimination_types": [
        "IntercompanyReceivablePayable",
        "IntercompanyRevenueExpense",
        "IntercompanyDividend",
        "IntercompanyInvestment"
      ],
      "api": {
        "calls": [
          "GET /api/v1/elimination-rules?groupId=:id",
          "POST /api/v1/elimination-rules",
          "PUT /api/v1/elimination-rules/:id",
          "DELETE /api/v1/elimination-rules/:id"
        ]
      },
      "files": {
        "create": [
          "packages/web/src/routes/organizations/$organizationId/consolidation/$groupId/elimination-rules/index.tsx"
        ]
      },
      "status": "pending"
    },
    {
      "id": "11.1",
      "epic": "UI: Intercompany",
      "title": "Intercompany transactions reconciliation",
      "description": "Track and reconcile intercompany transactions between group companies.",
      "specs": [
        "DOMAIN_MODEL.md",
        "ACCOUNTING_RESEARCH.md",
        "REACT_BEST_PRACTICES.md",
        "E2E_TESTING.md"
      ],
      "acceptance_criteria": [
        "Transactions list: Date, From Company, To Company, Type, Amount, Status",
        "Status: Matched, Unmatched, PartiallyMatched, VarianceApproved",
        "Filter by: Company pair, Transaction type, Matching status, Date range",
        "Summary cards: Total transactions, Unmatched count, Variance total",
        "Create transaction: From/To companies, type, amount, date",
        "Update matching status (approve variance with explanation)",
        "E2E test: Intercompany reconciliation"
      ],
      "transaction_types": [
        "SalePurchase",
        "Loan",
        "ManagementFee",
        "Dividend",
        "CapitalContribution"
      ],
      "api": {
        "calls": [
          "GET /api/v1/intercompany-transactions?organizationId=:id",
          "POST /api/v1/intercompany-transactions",
          "PUT /api/v1/intercompany-transactions/:id",
          "DELETE /api/v1/intercompany-transactions/:id"
        ]
      },
      "files": {
        "create": [
          "packages/web/src/routes/organizations/$organizationId/intercompany/index.tsx",
          "packages/web/src/components/intercompany/IntercompanyTransactionForm.tsx"
        ]
      },
      "status": "pending"
    },
    {
      "id": "12.1",
      "epic": "UI: Audit Log",
      "title": "Audit log viewer",
      "description": "View audit trail for compliance and SOX requirements. Shows history of all changes to entities.",
      "specs": [
        "DOMAIN_MODEL.md",
        "REACT_BEST_PRACTICES.md",
        "E2E_TESTING.md"
      ],
      "acceptance_criteria": [
        "Audit log page accessible from organization settings",
        "Table columns: Timestamp, User, Entity Type, Entity ID, Action, Changes",
        "Filter by: Entity type, User, Action type, Date range",
        "Entity types: Organization, Company, Account, JournalEntry, FiscalPeriod, etc.",
        "Action types: Create, Update, Delete, StatusChange",
        "Expandable row shows before/after values for changes",
        "Click entity ID links to entity detail page",
        "Pagination for large result sets",
        "Export to CSV for compliance reports",
        "E2E test: Audit log displays and filters correctly"
      ],
      "api": {
        "calls": [
          "GET /api/v1/audit-log?entityType=:type&userId=:id&action=:action&fromDate=:date&toDate=:date"
        ]
      },
      "files": {
        "create": [
          "packages/web/src/routes/organizations/$organizationId/audit-log/index.tsx",
          "packages/web/src/components/audit/AuditLogTable.tsx",
          "packages/web/src/components/audit/AuditEntryDetail.tsx"
        ]
      },
      "status": "pending"
    }
  ]
}
