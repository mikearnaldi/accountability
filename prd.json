{
  "project": "Accountability",
  "description": "Multi-company, multi-currency accounting application built on US GAAP principles",
  "version": "5.0.0",
  "created_at": "2026-01-10",
  "updated_at": "2026-01-15",
  "specs_dir": "specs/",
  "available_specs": [
    "DOMAIN_MODEL.md",
    "ACCOUNTING_RESEARCH.md",
    "EFFECT_BEST_PRACTICES.md",
    "EFFECT_SQL.md",
    "EFFECT_LAYERS.md",
    "EFFECT_TESTING.md",
    "HTTP_API_TANSTACK.md",
    "API_BEST_PRACTICES.md",
    "AUTHENTICATION.md",
    "E2E_TESTING.md",
    "REACT_BEST_PRACTICES.md",
    "USABILITY_BEST_PRACTICES.md",
    "UI_ARCHITECTURE.md"
  ],
  "architecture": {
    "principle": "Effect on server only. Pure React + generated fetch client on frontend.",
    "backend": {
      "packages": ["core", "persistence", "api"],
      "stack": "Effect for type-safe business logic, @effect/sql for database, HttpApi for REST endpoints",
      "testing": "@effect/vitest for unit/integration tests"
    },
    "frontend": {
      "package": "web",
      "stack": "TanStack Start + React + Tailwind CSS + openapi-fetch client",
      "state": "React useState/useReducer for local state. Server state via loaders.",
      "no_effect": "NO Effect code in frontend. Plain fetch via generated openapi-fetch client.",
      "testing": "Playwright for E2E tests"
    },
    "api_client": {
      "generation": "pnpm generate:api in packages/web",
      "tools": "openapi-typescript generates types, openapi-fetch provides typed client",
      "output": ["src/api/schema.ts", "src/api/client.ts"],
      "usage": "import { api } from '@/api/client'; await api.GET('/api/v1/organizations')",
      "cookie_auth": {
        "principle": "httpOnly cookies ONLY. localStorage is FORBIDDEN.",
        "ssr": "Forward cookie from request.headers.get('cookie') to api client",
        "client": "Cookies sent automatically via credentials: 'include'"
      }
    }
  },
  "testing_policy": {
    "mandatory": "EVERY story MUST include tests. A story is NOT complete without passing tests.",
    "ui_changes": "E2E tests in packages/web/test-e2e/",
    "api_changes": "Unit/integration tests using @effect/vitest",
    "verification": "Run 'pnpm test && pnpm test:e2e' before marking any story complete."
  },
  "ui_requirements": {
    "mandatory_spec": "ALL UI work MUST follow specs/UI_ARCHITECTURE.md",
    "layout_rule": "EVERY authenticated page MUST use AppLayout with sidebar and header",
    "no_exceptions": [
      "NO pages without sidebar (except /organizations selector)",
      "NO manual breadcrumb HTML - use Breadcrumbs component",
      "NO page-specific headers - use shared Header component",
      "NO creating new layout patterns - follow existing patterns"
    ],
    "required_elements": [
      "Organization selector accessible from every page",
      "User menu accessible from every page",
      "Breadcrumbs showing current location",
      "Empty states with clear CTAs",
      "Loading states (skeleton loaders)",
      "Error states with retry options",
      "data-testid attributes on all interactive elements"
    ]
  },
  "api_coverage": {
    "implemented": {
      "auth": [
        "POST /api/auth/register",
        "POST /api/auth/login",
        "POST /api/auth/logout",
        "GET /api/auth/me"
      ],
      "organizations": [
        "GET /api/v1/organizations",
        "GET /api/v1/organizations/:id",
        "POST /api/v1/organizations",
        "PUT /api/v1/organizations/:id",
        "DELETE /api/v1/organizations/:id"
      ],
      "companies": [
        "GET /api/v1/companies",
        "GET /api/v1/companies/:id",
        "POST /api/v1/companies",
        "PUT /api/v1/companies/:id",
        "DELETE /api/v1/companies/:id"
      ],
      "accounts": [
        "GET /api/v1/accounts",
        "GET /api/v1/accounts/:id",
        "POST /api/v1/accounts",
        "PUT /api/v1/accounts/:id",
        "DELETE /api/v1/accounts/:id"
      ],
      "journal_entries": [
        "GET /api/v1/journal-entries",
        "GET /api/v1/journal-entries/:id",
        "POST /api/v1/journal-entries",
        "PUT /api/v1/journal-entries/:id",
        "DELETE /api/v1/journal-entries/:id",
        "POST /api/v1/journal-entries/:id/submit",
        "POST /api/v1/journal-entries/:id/approve",
        "POST /api/v1/journal-entries/:id/reject",
        "POST /api/v1/journal-entries/:id/post",
        "POST /api/v1/journal-entries/:id/reverse"
      ],
      "fiscal": [
        "GET /api/v1/fiscal/fiscal-years",
        "POST /api/v1/fiscal/fiscal-years",
        "GET /api/v1/fiscal/fiscal-periods",
        "POST /api/v1/fiscal/fiscal-periods/:id/open",
        "POST /api/v1/fiscal/fiscal-periods/:id/close",
        "POST /api/v1/fiscal/fiscal-periods/:id/soft-close",
        "POST /api/v1/fiscal/fiscal-periods/:id/reopen"
      ],
      "exchange_rates": [
        "GET /api/v1/exchange-rates",
        "POST /api/v1/exchange-rates",
        "POST /api/v1/exchange-rates/bulk",
        "DELETE /api/v1/exchange-rates/:id",
        "GET /api/v1/exchange-rates/by-date",
        "GET /api/v1/exchange-rates/latest"
      ],
      "consolidation": [
        "GET /api/v1/consolidation/groups",
        "POST /api/v1/consolidation/groups",
        "PUT /api/v1/consolidation/groups/:id",
        "DELETE /api/v1/consolidation/groups/:id",
        "POST /api/v1/consolidation/groups/:id/members",
        "DELETE /api/v1/consolidation/groups/:id/members/:companyId",
        "GET /api/v1/consolidation/runs",
        "POST /api/v1/consolidation/runs",
        "GET /api/v1/consolidation/runs/:id/trial-balance"
      ],
      "elimination_rules": [
        "GET /api/v1/elimination-rules",
        "POST /api/v1/elimination-rules",
        "PUT /api/v1/elimination-rules/:id",
        "DELETE /api/v1/elimination-rules/:id"
      ],
      "intercompany": [
        "GET /api/v1/intercompany-transactions",
        "POST /api/v1/intercompany-transactions",
        "PUT /api/v1/intercompany-transactions/:id",
        "DELETE /api/v1/intercompany-transactions/:id"
      ],
      "reports": [
        "GET /api/v1/reports/trial-balance",
        "GET /api/v1/reports/balance-sheet",
        "GET /api/v1/reports/income-statement",
        "GET /api/v1/reports/cash-flow",
        "GET /api/v1/reports/equity-statement"
      ],
      "reference_data": [
        "GET /api/v1/currencies",
        "GET /api/v1/jurisdictions",
        "GET /api/v1/account-templates",
        "GET /api/v1/account-templates/:type",
        "POST /api/v1/account-templates/:type/apply",
        "GET /api/v1/audit-log"
      ]
    },
    "not_implemented": []
  },
  "roadmap": {
    "description": "Execution order based on dependencies and priority",
    "phases": [
      {
        "phase": 1,
        "name": "Critical UI Foundation Fixes",
        "priority": "P0",
        "stories": ["2.3", "2.4"],
        "description": "Fix broken UI architecture. These MUST be done first before any other UI work.",
        "blockers": "All other UI stories are blocked until these are complete"
      },
      {
        "phase": 2,
        "name": "Navigation & Layout Polish",
        "priority": "P1",
        "stories": ["2.5", "2.6", "2.7", "2.8"],
        "description": "Complete the navigation system with company context, quick actions, breadcrumbs, and mobile support",
        "depends_on": ["2.3", "2.4"]
      },
      {
        "phase": 3,
        "name": "Core Feature UI Fixes",
        "priority": "P1",
        "stories": ["4.1-fix", "4.2-fix", "4.3-fix", "5.1-fix", "5.2-fix", "6.1-fix", "6.2-fix", "6.3-fix"],
        "description": "Update existing 'complete' UI pages to use proper layout (they currently have no sidebar)",
        "depends_on": ["2.3"]
      },
      {
        "phase": 4,
        "name": "Reports UI",
        "priority": "P2",
        "stories": ["7.1", "7.2", "7.3", "7.4", "7.5", "7.6"],
        "description": "Financial reports dashboard and individual report pages",
        "depends_on": ["2.3", "2.5"]
      },
      {
        "phase": 5,
        "name": "Advanced Features UI",
        "priority": "P2",
        "stories": ["8.1", "9.1", "10.1", "10.2", "10.3", "10.4", "11.1", "12.1"],
        "description": "Fiscal periods, exchange rates, consolidation, intercompany, audit log",
        "depends_on": ["2.3", "2.5"]
      }
    ]
  },
  "stories": [
    {
      "id": "1.1",
      "epic": "API: Reference Data",
      "title": "Currency master data endpoint",
      "priority": "P2",
      "status": "complete",
      "description": "API endpoint to list available currencies for UI dropdowns.",
      "specs": ["DOMAIN_MODEL.md", "API_BEST_PRACTICES.md"],
      "acceptance_criteria": [
        "GET /api/v1/currencies returns list of currencies",
        "Response schema: { currencies: [{ code, name, symbol, decimalPlaces, isActive }] }",
        "Filter by isActive query parameter (default: true)",
        "Unit tests for endpoint"
      ],
      "api": {
        "endpoint": "GET /api/v1/currencies",
        "response": {
          "currencies": [{ "code": "USD", "name": "US Dollar", "symbol": "$", "decimalPlaces": 2, "isActive": true }]
        }
      },
      "files": {
        "create": ["packages/api/src/Api/CurrencyApi.ts", "packages/api/src/Handlers/CurrencyApiHandler.ts", "packages/api/test/CurrencyApi.test.ts"],
        "reference": ["packages/core/src/Domains/Currency.ts"]
      }
    },
    {
      "id": "1.2",
      "epic": "API: Reference Data",
      "title": "Jurisdiction master data endpoint",
      "priority": "P2",
      "status": "complete",
      "description": "API endpoint to list available jurisdictions for UI dropdowns.",
      "specs": ["DOMAIN_MODEL.md", "API_BEST_PRACTICES.md"],
      "acceptance_criteria": [
        "GET /api/v1/jurisdictions returns list of jurisdictions",
        "Response schema: { jurisdictions: [{ code, name, defaultCurrency }] }",
        "Unit tests for endpoint"
      ],
      "api": {
        "endpoint": "GET /api/v1/jurisdictions",
        "response": {
          "jurisdictions": [{ "code": "US", "name": "United States", "defaultCurrency": "USD" }]
        }
      },
      "files": {
        "create": ["packages/api/src/Api/JurisdictionApi.ts", "packages/api/src/Handlers/JurisdictionApiHandler.ts", "packages/api/test/JurisdictionApi.test.ts"],
        "reference": ["packages/core/src/Domains/Jurisdiction.ts"]
      }
    },
    {
      "id": "1.3",
      "epic": "API: Reference Data",
      "title": "Account templates endpoint",
      "priority": "P2",
      "status": "complete",
      "description": "API endpoints to list and apply chart of accounts templates.",
      "specs": ["DOMAIN_MODEL.md", "API_BEST_PRACTICES.md"],
      "acceptance_criteria": [
        "GET /api/v1/account-templates returns list of available templates",
        "GET /api/v1/account-templates/:type returns template with all account definitions",
        "POST /api/v1/account-templates/:type/apply applies template to a company",
        "Unit tests for all endpoints"
      ],
      "api": {
        "endpoints": ["GET /api/v1/account-templates", "GET /api/v1/account-templates/:type", "POST /api/v1/account-templates/:type/apply"],
        "template_types": ["GeneralBusiness", "Manufacturing", "ServiceBusiness", "HoldingCompany"]
      },
      "files": {
        "create": ["packages/api/src/Api/AccountTemplateApi.ts", "packages/api/src/Handlers/AccountTemplateApiHandler.ts", "packages/api/test/AccountTemplateApi.test.ts"],
        "reference": ["packages/core/src/Domains/AccountTemplate.ts"]
      }
    },
    {
      "id": "1.4",
      "epic": "API: Reference Data",
      "title": "Audit log query endpoint",
      "priority": "P2",
      "status": "complete",
      "description": "API endpoint to query audit trail entries for compliance and SOX requirements.",
      "specs": ["DOMAIN_MODEL.md", "API_BEST_PRACTICES.md"],
      "acceptance_criteria": [
        "GET /api/v1/audit-log returns paginated audit entries",
        "Query parameters: entityType, entityId, userId, action, fromDate, toDate, limit, offset",
        "Unit tests for endpoint"
      ],
      "api": {
        "endpoint": "GET /api/v1/audit-log",
        "query_params": ["entityType", "entityId", "userId", "action", "fromDate", "toDate", "limit", "offset"]
      },
      "files": {
        "create": ["packages/api/src/Api/AuditLogApi.ts", "packages/api/src/Handlers/AuditLogApiHandler.ts", "packages/persistence/src/Repositories/AuditLogRepository.ts", "packages/api/test/AuditLogApi.test.ts"]
      }
    },
    {
      "id": "2.1",
      "epic": "UI: Core Layout",
      "title": "Base layout components",
      "priority": "P0",
      "status": "complete",
      "issues": "CRITICAL: Layout not applied consistently. Stories 2.3-2.8 fix this.",
      "description": "Base layout components: AppLayout, Sidebar, Header, OrganizationSelector.",
      "specs": ["UI_ARCHITECTURE.md", "REACT_BEST_PRACTICES.md", "USABILITY_BEST_PRACTICES.md"],
      "acceptance_criteria": [
        "AppLayout component with sidebar, header, main content area",
        "Sidebar with navigation items scoped to organization",
        "Header with organization selector and user menu",
        "Responsive design: desktop, tablet, mobile",
        "All components have data-testid attributes"
      ],
      "files": {
        "created": [
          "packages/web/src/components/layout/AppLayout.tsx",
          "packages/web/src/components/layout/Sidebar.tsx",
          "packages/web/src/components/layout/Header.tsx",
          "packages/web/src/components/layout/OrganizationSelector.tsx",
          "packages/web/src/components/layout/MobileSidebar.tsx",
          "packages/web/src/components/layout/Breadcrumbs.tsx"
        ]
      }
    },
    {
      "id": "2.2",
      "epic": "UI: Core Layout",
      "title": "Organization dashboard",
      "priority": "P1",
      "status": "complete",
      "description": "Dashboard showing organization overview with summary cards and quick actions.",
      "specs": ["UI_ARCHITECTURE.md", "REACT_BEST_PRACTICES.md", "E2E_TESTING.md"],
      "acceptance_criteria": [
        "Route: /organizations/:organizationId/dashboard",
        "Summary cards: Companies count, Total accounts, Pending approvals, Open periods",
        "Quick actions: Create Company, View Companies, View Exchange Rates",
        "Uses AppLayout with sidebar",
        "E2E test: Dashboard loads with org-scoped data"
      ],
      "api": {
        "calls": [
          "GET /api/v1/organizations/:id",
          "GET /api/v1/companies?organizationId=:id",
          "GET /api/v1/journal-entries?organizationId=:id&status=PendingApproval"
        ]
      },
      "files": {
        "created": ["packages/web/src/routes/organizations/$organizationId/dashboard.tsx"]
      }
    },
    {
      "id": "2.3",
      "epic": "UI: Core Layout",
      "title": "Consistent layout across ALL pages",
      "priority": "P0",
      "status": "pending",
      "blocking": true,
      "blocks": ["4.1-fix", "4.2-fix", "4.3-fix", "5.1-fix", "5.2-fix", "6.1-fix", "6.2-fix", "6.3-fix", "7.1", "7.2", "7.3", "7.4", "7.5", "7.6", "8.1", "9.1", "10.1", "10.2", "10.3", "10.4", "11.1", "12.1"],
      "description": "CRITICAL: Fix inconsistent layouts. Currently sidebar only appears on dashboard/settings. All other pages (companies, accounts, journal entries) have NO sidebar, NO header, NO organization selector. This is unacceptable for a professional application.",
      "specs": ["UI_ARCHITECTURE.md", "REACT_BEST_PRACTICES.md"],
      "acceptance_criteria": [
        "Create layout route at /organizations/$organizationId that wraps ALL child routes",
        "ALL pages under /organizations/:id/* MUST have:",
        "  - Left sidebar with navigation",
        "  - Header with organization selector and user menu",
        "  - Breadcrumbs showing current location",
        "Pages that currently LACK sidebar (must be fixed):",
        "  - /organizations/:id/companies",
        "  - /organizations/:id/companies/new",
        "  - /organizations/:id/companies/:companyId",
        "  - /organizations/:id/companies/:companyId/accounts",
        "  - /organizations/:id/companies/:companyId/accounts/new",
        "  - /organizations/:id/companies/:companyId/journal-entries",
        "  - /organizations/:id/companies/:companyId/journal-entries/new",
        "  - /organizations/:id/companies/:companyId/journal-entries/:id",
        "Remove ALL manual breadcrumb HTML from individual route files",
        "Remove /organizations/:id/index.tsx (redirect to dashboard instead)",
        "User can switch organizations from ANY page",
        "User can access profile/logout from ANY page",
        "Mobile hamburger menu works on ALL pages",
        "E2E test: Verify sidebar visible on every authenticated page"
      ],
      "implementation": {
        "approach": "Use TanStack Router layout routes",
        "steps": [
          "1. Create _layout.tsx in routes/organizations/$organizationId/",
          "2. Layout fetches org data and provides to children via context",
          "3. Layout renders AppLayout with sidebar, header, breadcrumbs",
          "4. Remove AppLayout wrapper from individual child routes",
          "5. Remove manual breadcrumb HTML from all child routes",
          "6. Delete index.tsx, add redirect from /:orgId to /:orgId/dashboard"
        ]
      },
      "files": {
        "create": ["packages/web/src/routes/organizations/$organizationId/_layout.tsx"],
        "modify": [
          "packages/web/src/routes/organizations/$organizationId/companies/index.tsx",
          "packages/web/src/routes/organizations/$organizationId/companies/new.tsx",
          "packages/web/src/routes/organizations/$organizationId/companies/$companyId/index.tsx",
          "packages/web/src/routes/organizations/$organizationId/companies/$companyId/accounts/index.tsx",
          "packages/web/src/routes/organizations/$organizationId/companies/$companyId/accounts/new.tsx",
          "packages/web/src/routes/organizations/$organizationId/companies/$companyId/journal-entries/index.tsx",
          "packages/web/src/routes/organizations/$organizationId/companies/$companyId/journal-entries/new.tsx",
          "packages/web/src/routes/organizations/$organizationId/companies/$companyId/journal-entries/$entryId/index.tsx",
          "packages/web/src/routes/organizations/$organizationId/dashboard.tsx",
          "packages/web/src/routes/organizations/$organizationId/settings.tsx"
        ],
        "delete": ["packages/web/src/routes/organizations/$organizationId/index.tsx"]
      },
      "testing": {
        "e2e": [
          "Navigate to /organizations/:id/companies - verify sidebar visible",
          "Navigate to /organizations/:id/companies/:id/accounts - verify sidebar visible",
          "Navigate to /organizations/:id/companies/:id/journal-entries - verify sidebar visible",
          "On any page, click organization selector - verify can switch orgs",
          "On any page, click user menu - verify logout option present",
          "On mobile, verify hamburger menu opens sidebar on all pages"
        ]
      }
    },
    {
      "id": "2.4",
      "epic": "UI: Core Layout",
      "title": "Post-login flow and home page",
      "priority": "P0",
      "status": "pending",
      "description": "Fix confusing post-login experience. Currently shows stale dashboard at '/' before user selects an organization. Professional apps go directly to org selector or auto-select single org.",
      "specs": ["UI_ARCHITECTURE.md", "REACT_BEST_PRACTICES.md"],
      "acceptance_criteria": [
        "Post-login behavior:",
        "  - 0 organizations: Redirect to /organizations/new with welcome message",
        "  - 1 organization: Auto-redirect to /organizations/:id/dashboard",
        "  - 2+ organizations: Show /organizations selector page",
        "The '/' route behavior:",
        "  - Unauthenticated: Show landing page (marketing)",
        "  - Authenticated: Redirect to /organizations (which handles the above logic)",
        "Remove the 'authenticated dashboard' from '/' route entirely",
        "Login success redirects based on org count (not to '/')",
        "E2E test: Verify correct flow for 0, 1, and 2+ org scenarios"
      ],
      "files": {
        "modify": [
          "packages/web/src/routes/index.tsx",
          "packages/web/src/routes/login.tsx",
          "packages/web/src/routes/organizations/index.tsx"
        ]
      },
      "testing": {
        "e2e": [
          "New user with 0 orgs: login → redirected to /organizations/new",
          "User with 1 org: login → redirected to /organizations/:id/dashboard",
          "User with 2+ orgs: login → shown /organizations selector",
          "Authenticated user visits '/' → redirected to /organizations"
        ]
      }
    },
    {
      "id": "2.5",
      "epic": "UI: Core Layout",
      "title": "Sidebar with company context",
      "priority": "P1",
      "status": "pending",
      "depends_on": ["2.3"],
      "description": "Enhance sidebar to show hierarchical navigation with company sub-menu when viewing company-scoped pages. Like QuickBooks/Xero.",
      "specs": ["UI_ARCHITECTURE.md", "REACT_BEST_PRACTICES.md"],
      "acceptance_criteria": [
        "Sidebar navigation structure:",
        "  + New (quick actions dropdown)",
        "  Dashboard",
        "  Companies",
        "    └─ [Company 1] (expandable when selected)",
        "        └─ Chart of Accounts",
        "        └─ Journal Entries",
        "        └─ Reports",
        "        └─ Fiscal Periods",
        "    └─ [Company 2]",
        "    └─ + Add Company",
        "  Exchange Rates",
        "  Consolidation",
        "  Intercompany",
        "  Audit Log",
        "  ───────────",
        "  Settings",
        "When on company page, that company is expanded and highlighted",
        "Current page is highlighted in sidebar",
        "Sidebar collapsed/expanded state persisted to localStorage",
        "E2E test: Navigate via sidebar, verify correct highlighting"
      ],
      "files": {
        "modify": ["packages/web/src/components/layout/Sidebar.tsx"]
      }
    },
    {
      "id": "2.6",
      "epic": "UI: Core Layout",
      "title": "+ New quick actions button",
      "priority": "P1",
      "status": "pending",
      "depends_on": ["2.3"],
      "description": "Add '+New' quick action button at top of sidebar for fast access to common creation actions. Standard pattern in QuickBooks, Xero, etc.",
      "specs": ["UI_ARCHITECTURE.md", "REACT_BEST_PRACTICES.md"],
      "acceptance_criteria": [
        "+ New button prominently displayed at top of sidebar",
        "Clicking opens dropdown menu with:",
        "  - New Journal Entry (if company context available)",
        "  - New Company",
        "  - New Account (if company context available)",
        "  - New Exchange Rate",
        "If action requires company context and none selected:",
        "  - Show company selector modal first, OR",
        "  - Navigate to company list with prompt",
        "Keyboard shortcut: Press 'n' to open quick actions",
        "E2E test: Create journal entry via quick actions"
      ],
      "files": {
        "create": ["packages/web/src/components/layout/QuickActionsMenu.tsx"],
        "modify": ["packages/web/src/components/layout/Sidebar.tsx"]
      }
    },
    {
      "id": "2.7",
      "epic": "UI: Core Layout",
      "title": "Dynamic breadcrumbs",
      "priority": "P1",
      "status": "pending",
      "depends_on": ["2.3"],
      "description": "Replace manual breadcrumb HTML with automatic breadcrumbs from route params. Consistent format: Org > Section > Company > Page.",
      "specs": ["UI_ARCHITECTURE.md", "REACT_BEST_PRACTICES.md"],
      "acceptance_criteria": [
        "Breadcrumbs auto-generated from current route",
        "Format: Organization Name > Section > [Company Name] > [Page]",
        "Examples:",
        "  - Acme Holdings > Dashboard",
        "  - Acme Holdings > Companies",
        "  - Acme Holdings > Companies > Acme Corp",
        "  - Acme Holdings > Companies > Acme Corp > Chart of Accounts",
        "  - Acme Holdings > Companies > Acme Corp > Journal Entries",
        "  - Acme Holdings > Companies > Acme Corp > Journal Entries > JE-2024-0001",
        "Each segment clickable (except current page)",
        "Org/company names fetched and cached (don't show UUIDs)",
        "E2E test: Verify breadcrumbs on 5+ different pages"
      ],
      "files": {
        "modify": [
          "packages/web/src/components/layout/Breadcrumbs.tsx",
          "packages/web/src/components/layout/AppLayout.tsx"
        ]
      }
    },
    {
      "id": "2.8",
      "epic": "UI: Core Layout",
      "title": "Responsive mobile navigation",
      "priority": "P1",
      "status": "pending",
      "depends_on": ["2.3"],
      "description": "Ensure mobile navigation works on ALL pages. Currently only dashboard has working mobile menu.",
      "specs": ["UI_ARCHITECTURE.md", "REACT_BEST_PRACTICES.md"],
      "acceptance_criteria": [
        "Mobile breakpoint: < 768px",
        "On mobile, ALL pages show:",
        "  - Hamburger menu icon in header",
        "  - Clicking opens full-screen sidebar drawer",
        "  - Organization selector accessible in drawer",
        "  - User menu accessible via avatar",
        "Drawer closes on:",
        "  - Navigation to new page",
        "  - Tap outside drawer",
        "  - Press Escape key",
        "E2E test (mobile viewport): Navigate entire app via mobile menu"
      ],
      "files": {
        "modify": [
          "packages/web/src/components/layout/AppLayout.tsx",
          "packages/web/src/components/layout/Header.tsx",
          "packages/web/src/components/layout/MobileSidebar.tsx"
        ]
      }
    },
    {
      "id": "3.1",
      "epic": "UI: Organizations",
      "title": "Organization selector page",
      "priority": "P1",
      "status": "complete",
      "description": "Entry point for selecting which organization to work with. Shows after login for users with multiple orgs.",
      "specs": ["UI_ARCHITECTURE.md", "REACT_BEST_PRACTICES.md", "E2E_TESTING.md"],
      "acceptance_criteria": [
        "Route: /organizations",
        "Card-based layout showing user's organizations",
        "Each card shows: Name, Currency, Companies count",
        "Click card → navigate to /organizations/:id/dashboard",
        "Create new organization button",
        "Auto-redirect if user has only 1 org",
        "Empty state with create prompt if 0 orgs",
        "E2E test: Select organization flow"
      ],
      "api": {
        "calls": ["GET /api/v1/organizations"]
      },
      "files": {
        "created": ["packages/web/src/routes/organizations/index.tsx"]
      }
    },
    {
      "id": "3.2",
      "epic": "UI: Organizations",
      "title": "Create organization form",
      "priority": "P1",
      "status": "complete",
      "description": "Form to create new organization.",
      "specs": ["UI_ARCHITECTURE.md", "REACT_BEST_PRACTICES.md", "E2E_TESTING.md"],
      "acceptance_criteria": [
        "Route: /organizations/new",
        "Form fields: Name, Reporting Currency, Settings",
        "Client-side validation",
        "Success: Navigate to new org's dashboard",
        "E2E test: Create organization"
      ],
      "files": {
        "created": [
          "packages/web/src/routes/organizations/new.tsx",
          "packages/web/src/components/forms/OrganizationForm.tsx"
        ]
      }
    },
    {
      "id": "3.3",
      "epic": "UI: Organizations",
      "title": "Organization settings page",
      "priority": "P1",
      "status": "complete",
      "description": "Settings page for organization. Edit name, defaults, danger zone for delete.",
      "specs": ["UI_ARCHITECTURE.md", "REACT_BEST_PRACTICES.md", "E2E_TESTING.md"],
      "acceptance_criteria": [
        "Route: /organizations/:id/settings",
        "Accessible from sidebar 'Settings' link",
        "Edit name, locale, timezone, fiscal year settings",
        "Danger zone: Delete org with confirmation",
        "E2E test: Edit organization settings"
      ],
      "files": {
        "created": ["packages/web/src/routes/organizations/$organizationId/settings.tsx"]
      }
    },
    {
      "id": "4.1",
      "epic": "UI: Companies",
      "title": "Companies list with hierarchy",
      "priority": "P1",
      "status": "needs_rework",
      "issues": "Page has NO SIDEBAR. Completely broken layout. Must wait for story 2.3.",
      "depends_on": ["2.3"],
      "description": "Display companies with parent/child hierarchy for consolidation.",
      "specs": ["UI_ARCHITECTURE.md", "REACT_BEST_PRACTICES.md", "E2E_TESTING.md"],
      "acceptance_criteria": [
        "MUST use AppLayout via layout route (story 2.3)",
        "Tree view showing parent/subsidiary hierarchy",
        "Columns: Name, Legal Name, Jurisdiction, Functional Currency, Status",
        "Subsidiaries indented under parent",
        "Show ownership % and consolidation method for subsidiaries",
        "Filter: Active/Inactive",
        "Create company button (prominent, not crappy)",
        "Empty state with helpful message and CTA",
        "E2E test: Hierarchy displays correctly"
      ],
      "api": {
        "calls": ["GET /api/v1/companies?organizationId=:id"]
      },
      "files": {
        "created": [
          "packages/web/src/routes/organizations/$organizationId/companies/index.tsx",
          "packages/web/src/components/company/CompanyHierarchyTree.tsx"
        ]
      }
    },
    {
      "id": "4.2",
      "epic": "UI: Companies",
      "title": "Create company form",
      "priority": "P1",
      "status": "needs_rework",
      "issues": "Page has NO SIDEBAR. Must wait for story 2.3.",
      "depends_on": ["2.3"],
      "description": "Form to create company with hierarchy setup.",
      "specs": ["UI_ARCHITECTURE.md", "REACT_BEST_PRACTICES.md", "E2E_TESTING.md"],
      "acceptance_criteria": [
        "MUST use AppLayout via layout route (story 2.3)",
        "Form sections: Basic, Currency, Fiscal Year, Hierarchy",
        "Parent company dropdown with ownership % and consolidation method",
        "Client-side validation",
        "E2E test: Create top-level and subsidiary company"
      ],
      "files": {
        "created": [
          "packages/web/src/routes/organizations/$organizationId/companies/new.tsx",
          "packages/web/src/components/forms/CompanyForm.tsx"
        ]
      }
    },
    {
      "id": "4.3",
      "epic": "UI: Companies",
      "title": "Company detail and edit",
      "priority": "P1",
      "status": "needs_rework",
      "issues": "Page has NO SIDEBAR. Must wait for story 2.3.",
      "depends_on": ["2.3"],
      "description": "View and edit company details. Quick links to related pages.",
      "specs": ["UI_ARCHITECTURE.md", "REACT_BEST_PRACTICES.md", "E2E_TESTING.md"],
      "acceptance_criteria": [
        "MUST use AppLayout via layout route (story 2.3)",
        "Header: Name, status badge, jurisdiction",
        "Info cards: Currencies, Fiscal Year, Hierarchy",
        "Quick links: Chart of Accounts, Journal Entries, Reports, Fiscal Periods",
        "Edit form, deactivate button",
        "E2E test: View and edit company"
      ],
      "files": {
        "created": ["packages/web/src/routes/organizations/$organizationId/companies/$companyId/index.tsx"]
      }
    },
    {
      "id": "5.1",
      "epic": "UI: Chart of Accounts",
      "title": "Accounts list with hierarchy",
      "priority": "P1",
      "status": "needs_rework",
      "issues": "Page has NO SIDEBAR. Must wait for story 2.3.",
      "depends_on": ["2.3"],
      "description": "Display company's chart of accounts with hierarchy.",
      "specs": ["UI_ARCHITECTURE.md", "ACCOUNTING_RESEARCH.md", "REACT_BEST_PRACTICES.md", "E2E_TESTING.md"],
      "acceptance_criteria": [
        "MUST use AppLayout via layout route (story 2.3)",
        "Tree view showing account hierarchy",
        "Columns: Number, Name, Type, Category, Normal Balance, Status",
        "Account type color coding",
        "Filter by: Account Type, Active/Inactive, Postable only",
        "Search by account number or name",
        "Create account button",
        "Empty state with Apply Template option",
        "E2E test: Accounts tree displays correctly"
      ],
      "api": {
        "calls": ["GET /api/v1/accounts?companyId=:id"]
      },
      "files": {
        "created": [
          "packages/web/src/routes/organizations/$organizationId/companies/$companyId/accounts/index.tsx",
          "packages/web/src/components/accounts/AccountTree.tsx"
        ]
      }
    },
    {
      "id": "5.2",
      "epic": "UI: Chart of Accounts",
      "title": "Create and edit account form",
      "priority": "P1",
      "status": "needs_rework",
      "issues": "Page has NO SIDEBAR. Must wait for story 2.3.",
      "depends_on": ["2.3"],
      "description": "Form to create and edit GL accounts.",
      "specs": ["UI_ARCHITECTURE.md", "ACCOUNTING_RESEARCH.md", "REACT_BEST_PRACTICES.md", "E2E_TESTING.md"],
      "acceptance_criteria": [
        "MUST use AppLayout via layout route (story 2.3)",
        "Form fields: Number, Name, Type, Category, Normal Balance, Parent, flags",
        "Account number validation (1xxx=Asset, 2xxx=Liability, etc.)",
        "E2E test: Create account in hierarchy"
      ],
      "files": {
        "created": [
          "packages/web/src/routes/organizations/$organizationId/companies/$companyId/accounts/new.tsx",
          "packages/web/src/components/forms/AccountForm.tsx"
        ]
      }
    },
    {
      "id": "5.3",
      "epic": "UI: Chart of Accounts",
      "title": "Apply account template",
      "priority": "P2",
      "status": "complete",
      "description": "Bootstrap chart of accounts from predefined template.",
      "specs": ["UI_ARCHITECTURE.md", "ACCOUNTING_RESEARCH.md", "REACT_BEST_PRACTICES.md", "E2E_TESTING.md"],
      "acceptance_criteria": [
        "Apply Template button on empty accounts page",
        "Template selection modal",
        "Confirmation before applying",
        "E2E test: Apply template"
      ],
      "files": {
        "created": ["packages/web/src/components/accounts/ApplyTemplateModal.tsx"]
      }
    },
    {
      "id": "6.1",
      "epic": "UI: Journal Entries",
      "title": "Journal entries list",
      "priority": "P1",
      "status": "needs_rework",
      "issues": "Page has NO SIDEBAR. Must wait for story 2.3.",
      "depends_on": ["2.3"],
      "description": "List journal entries with filters and pagination.",
      "specs": ["UI_ARCHITECTURE.md", "ACCOUNTING_RESEARCH.md", "REACT_BEST_PRACTICES.md", "E2E_TESTING.md"],
      "acceptance_criteria": [
        "MUST use AppLayout via layout route (story 2.3)",
        "Columns: Entry #, Date, Reference, Description, Total, Status",
        "Status badges with appropriate colors",
        "Filter by: Status, Entry Type, Date Range",
        "Pagination",
        "Create entry button",
        "Empty state",
        "E2E test: List with filters"
      ],
      "api": {
        "calls": ["GET /api/v1/journal-entries?companyId=:id&status=:status&limit=:limit&offset=:offset"]
      },
      "files": {
        "created": ["packages/web/src/routes/organizations/$organizationId/companies/$companyId/journal-entries/index.tsx"]
      }
    },
    {
      "id": "6.2",
      "epic": "UI: Journal Entries",
      "title": "Create journal entry form",
      "priority": "P1",
      "status": "needs_rework",
      "issues": "Page has NO SIDEBAR. Must wait for story 2.3.",
      "depends_on": ["2.3"],
      "description": "Multi-line journal entry creation with real-time balance validation.",
      "specs": ["UI_ARCHITECTURE.md", "ACCOUNTING_RESEARCH.md", "REACT_BEST_PRACTICES.md", "E2E_TESTING.md"],
      "acceptance_criteria": [
        "MUST use AppLayout via layout route (story 2.3)",
        "Header fields: Date, Reference, Description, Entry Type",
        "Line items table with add/remove",
        "Running totals, balance indicator",
        "Cannot submit if unbalanced",
        "Save as Draft, Submit for Approval buttons",
        "E2E test: Create balanced entry"
      ],
      "files": {
        "created": [
          "packages/web/src/routes/organizations/$organizationId/companies/$companyId/journal-entries/new.tsx",
          "packages/web/src/components/forms/JournalEntryForm.tsx"
        ]
      }
    },
    {
      "id": "6.3",
      "epic": "UI: Journal Entries",
      "title": "Journal entry detail and workflow",
      "priority": "P1",
      "status": "needs_rework",
      "issues": "Page has NO SIDEBAR. Must wait for story 2.3.",
      "depends_on": ["2.3"],
      "description": "View entry details with approval workflow actions.",
      "specs": ["UI_ARCHITECTURE.md", "ACCOUNTING_RESEARCH.md", "REACT_BEST_PRACTICES.md", "E2E_TESTING.md"],
      "acceptance_criteria": [
        "MUST use AppLayout via layout route (story 2.3)",
        "Header: Entry #, Date, Reference, Type, Status badge",
        "Metadata: Created by, Created at, Posted by, Posted at",
        "Line items table (read-only for non-draft)",
        "Workflow buttons based on status",
        "E2E test: Complete approval workflow"
      ],
      "files": {
        "created": ["packages/web/src/routes/organizations/$organizationId/companies/$companyId/journal-entries/$entryId/index.tsx"]
      }
    },
    {
      "id": "7.1",
      "epic": "UI: Financial Reports",
      "title": "Reports dashboard",
      "priority": "P2",
      "status": "pending",
      "depends_on": ["2.3"],
      "description": "Landing page with cards for each report type.",
      "specs": ["UI_ARCHITECTURE.md", "REACT_BEST_PRACTICES.md", "E2E_TESTING.md"],
      "acceptance_criteria": [
        "MUST use AppLayout via layout route",
        "Cards for: Trial Balance, Balance Sheet, Income Statement, Cash Flow, Equity Statement",
        "Quick date picker for common periods",
        "Click card → navigate to report with date pre-filled",
        "E2E test: Reports dashboard"
      ],
      "files": {
        "create": ["packages/web/src/routes/organizations/$organizationId/companies/$companyId/reports/index.tsx"]
      }
    },
    {
      "id": "7.2",
      "epic": "UI: Financial Reports",
      "title": "Trial Balance report",
      "priority": "P2",
      "status": "pending",
      "depends_on": ["2.3", "7.1"],
      "description": "Generate trial balance with debit/credit columns.",
      "specs": ["UI_ARCHITECTURE.md", "ACCOUNTING_RESEARCH.md", "REACT_BEST_PRACTICES.md", "E2E_TESTING.md"],
      "acceptance_criteria": [
        "MUST use AppLayout via layout route",
        "Date picker, Generate button",
        "Table: Account Number, Name, Type, Debit Balance, Credit Balance",
        "Total row (must balance)",
        "Filter: By account type, hide zero balances",
        "Export: PDF, Excel, CSV",
        "E2E test: Trial balance totals balance"
      ],
      "api": {
        "call": "GET /api/v1/reports/trial-balance?companyId=:id&asOfDate=:date"
      },
      "files": {
        "create": [
          "packages/web/src/routes/organizations/$organizationId/companies/$companyId/reports/trial-balance.tsx",
          "packages/web/src/components/reports/TrialBalanceTable.tsx"
        ]
      }
    },
    {
      "id": "7.3",
      "epic": "UI: Financial Reports",
      "title": "Balance Sheet report",
      "priority": "P2",
      "status": "pending",
      "depends_on": ["2.3", "7.1"],
      "description": "Generate balance sheet per ASC 210.",
      "specs": ["UI_ARCHITECTURE.md", "ACCOUNTING_RESEARCH.md", "REACT_BEST_PRACTICES.md", "E2E_TESTING.md"],
      "acceptance_criteria": [
        "MUST use AppLayout via layout route",
        "Date picker with optional comparative date",
        "Sections: Assets, Liabilities, Equity with subtotals",
        "Total Assets = Total Liabilities + Equity",
        "Variance column if comparative selected",
        "Export: PDF, Excel, CSV",
        "E2E test: Balance sheet balances"
      ],
      "api": {
        "call": "GET /api/v1/reports/balance-sheet?companyId=:id&asOfDate=:date"
      },
      "files": {
        "create": ["packages/web/src/routes/organizations/$organizationId/companies/$companyId/reports/balance-sheet.tsx"]
      }
    },
    {
      "id": "7.4",
      "epic": "UI: Financial Reports",
      "title": "Income Statement report",
      "priority": "P2",
      "status": "pending",
      "depends_on": ["2.3", "7.1"],
      "description": "Generate income statement per ASC 220.",
      "specs": ["UI_ARCHITECTURE.md", "ACCOUNTING_RESEARCH.md", "REACT_BEST_PRACTICES.md", "E2E_TESTING.md"],
      "acceptance_criteria": [
        "MUST use AppLayout via layout route",
        "Date range picker with optional comparative period",
        "Sections: Revenue, Cost of Sales, Operating Expenses, Other",
        "Calculated: Gross Profit, Operating Income, Net Income",
        "Export: PDF, Excel, CSV",
        "E2E test: Income statement calculations"
      ],
      "api": {
        "call": "GET /api/v1/reports/income-statement?companyId=:id&periodStartDate=:date&periodEndDate=:date"
      },
      "files": {
        "create": ["packages/web/src/routes/organizations/$organizationId/companies/$companyId/reports/income-statement.tsx"]
      }
    },
    {
      "id": "7.5",
      "epic": "UI: Financial Reports",
      "title": "Cash Flow Statement report",
      "priority": "P2",
      "status": "pending",
      "depends_on": ["2.3", "7.1"],
      "description": "Generate cash flow statement per ASC 230.",
      "specs": ["UI_ARCHITECTURE.md", "ACCOUNTING_RESEARCH.md", "REACT_BEST_PRACTICES.md", "E2E_TESTING.md"],
      "acceptance_criteria": [
        "MUST use AppLayout via layout route",
        "Date range picker",
        "Method selector: Direct or Indirect",
        "Sections: Operating, Investing, Financing Activities",
        "Beginning cash + Net change = Ending cash",
        "Export: PDF, Excel, CSV",
        "E2E test: Cash flow reconciles"
      ],
      "api": {
        "call": "GET /api/v1/reports/cash-flow?companyId=:id&periodStartDate=:date&periodEndDate=:date&method=:method"
      },
      "files": {
        "create": ["packages/web/src/routes/organizations/$organizationId/companies/$companyId/reports/cash-flow.tsx"]
      }
    },
    {
      "id": "7.6",
      "epic": "UI: Financial Reports",
      "title": "Statement of Changes in Equity report",
      "priority": "P2",
      "status": "pending",
      "depends_on": ["2.3", "7.1"],
      "description": "Generate equity statement showing period movements.",
      "specs": ["UI_ARCHITECTURE.md", "ACCOUNTING_RESEARCH.md", "REACT_BEST_PRACTICES.md", "E2E_TESTING.md"],
      "acceptance_criteria": [
        "MUST use AppLayout via layout route",
        "Date range picker",
        "Columns: Common Stock, APIC, Retained Earnings, Treasury Stock, AOCI, Total",
        "Rows: Opening Balance, Net Income, Dividends, Stock transactions, Closing Balance",
        "Export: PDF, Excel, CSV",
        "E2E test: Equity statement balances"
      ],
      "api": {
        "call": "GET /api/v1/reports/equity-statement?companyId=:id&periodStartDate=:date&periodEndDate=:date"
      },
      "files": {
        "create": ["packages/web/src/routes/organizations/$organizationId/companies/$companyId/reports/equity-statement.tsx"]
      }
    },
    {
      "id": "8.1",
      "epic": "UI: Fiscal Periods",
      "title": "Fiscal years and periods management",
      "priority": "P2",
      "status": "pending",
      "depends_on": ["2.3"],
      "description": "Manage fiscal years and period lifecycle.",
      "specs": ["UI_ARCHITECTURE.md", "ACCOUNTING_RESEARCH.md", "REACT_BEST_PRACTICES.md", "E2E_TESTING.md"],
      "acceptance_criteria": [
        "MUST use AppLayout via layout route",
        "Fiscal years list with expandable periods",
        "Create fiscal year button",
        "Period status indicators",
        "Period actions by status",
        "E2E test: Period lifecycle"
      ],
      "api": {
        "calls": [
          "GET /api/v1/fiscal/fiscal-years?companyId=:id",
          "POST /api/v1/fiscal/fiscal-years",
          "GET /api/v1/fiscal/fiscal-periods?fiscalYearId=:id",
          "POST /api/v1/fiscal/fiscal-periods/:id/open",
          "POST /api/v1/fiscal/fiscal-periods/:id/soft-close",
          "POST /api/v1/fiscal/fiscal-periods/:id/close",
          "POST /api/v1/fiscal/fiscal-periods/:id/reopen"
        ]
      },
      "files": {
        "create": [
          "packages/web/src/routes/organizations/$organizationId/companies/$companyId/fiscal/index.tsx",
          "packages/web/src/components/fiscal/FiscalYearList.tsx",
          "packages/web/src/components/fiscal/PeriodStatusBadge.tsx"
        ]
      }
    },
    {
      "id": "9.1",
      "epic": "UI: Exchange Rates",
      "title": "Exchange rates management",
      "priority": "P2",
      "status": "pending",
      "depends_on": ["2.3"],
      "description": "Manage exchange rates with CRUD and bulk import.",
      "specs": ["UI_ARCHITECTURE.md", "ACCOUNTING_RESEARCH.md", "REACT_BEST_PRACTICES.md", "E2E_TESTING.md"],
      "acceptance_criteria": [
        "MUST use AppLayout via layout route",
        "Rates list with filters",
        "Create single rate form",
        "Bulk import from CSV",
        "Delete rate",
        "Rate lookup tool",
        "E2E test: Exchange rates CRUD"
      ],
      "api": {
        "calls": [
          "GET /api/v1/exchange-rates?organizationId=:id",
          "POST /api/v1/exchange-rates",
          "POST /api/v1/exchange-rates/bulk",
          "DELETE /api/v1/exchange-rates/:id"
        ]
      },
      "files": {
        "create": [
          "packages/web/src/routes/organizations/$organizationId/exchange-rates/index.tsx",
          "packages/web/src/components/forms/ExchangeRateForm.tsx"
        ]
      }
    },
    {
      "id": "10.1",
      "epic": "UI: Consolidation",
      "title": "Consolidation groups list",
      "priority": "P2",
      "status": "pending",
      "depends_on": ["2.3"],
      "description": "List consolidation groups.",
      "specs": ["UI_ARCHITECTURE.md", "ACCOUNTING_RESEARCH.md", "REACT_BEST_PRACTICES.md", "E2E_TESTING.md"],
      "acceptance_criteria": [
        "MUST use AppLayout via layout route",
        "Groups list with member count",
        "Create group button",
        "Click row → group detail",
        "E2E test: Groups list"
      ],
      "api": {
        "calls": ["GET /api/v1/consolidation/groups?organizationId=:id"]
      },
      "files": {
        "create": ["packages/web/src/routes/organizations/$organizationId/consolidation/index.tsx"]
      }
    },
    {
      "id": "10.2",
      "epic": "UI: Consolidation",
      "title": "Consolidation group detail",
      "priority": "P2",
      "status": "pending",
      "depends_on": ["2.3", "10.1"],
      "description": "Manage consolidation group members.",
      "specs": ["UI_ARCHITECTURE.md", "ACCOUNTING_RESEARCH.md", "REACT_BEST_PRACTICES.md", "E2E_TESTING.md"],
      "acceptance_criteria": [
        "MUST use AppLayout via layout route",
        "Members list with ownership %",
        "Add/edit/remove members",
        "Links to elimination rules and runs",
        "E2E test: Member management"
      ],
      "api": {
        "calls": [
          "GET /api/v1/consolidation/groups/:id",
          "PUT /api/v1/consolidation/groups/:id",
          "POST /api/v1/consolidation/groups/:id/members",
          "DELETE /api/v1/consolidation/groups/:id/members/:companyId"
        ]
      },
      "files": {
        "create": ["packages/web/src/routes/organizations/$organizationId/consolidation/$groupId/index.tsx"]
      }
    },
    {
      "id": "10.3",
      "epic": "UI: Consolidation",
      "title": "Consolidation runs",
      "priority": "P2",
      "status": "pending",
      "depends_on": ["2.3", "10.2"],
      "description": "Execute consolidation runs and view results.",
      "specs": ["UI_ARCHITECTURE.md", "ACCOUNTING_RESEARCH.md", "REACT_BEST_PRACTICES.md", "E2E_TESTING.md"],
      "acceptance_criteria": [
        "MUST use AppLayout via layout route",
        "Runs list",
        "Initiate new run",
        "View completed run results",
        "E2E test: Consolidation run workflow"
      ],
      "api": {
        "calls": [
          "GET /api/v1/consolidation/runs?groupId=:id",
          "POST /api/v1/consolidation/runs",
          "GET /api/v1/consolidation/runs/:id/trial-balance"
        ]
      },
      "files": {
        "create": [
          "packages/web/src/routes/organizations/$organizationId/consolidation/$groupId/runs/index.tsx",
          "packages/web/src/routes/organizations/$organizationId/consolidation/$groupId/runs/$runId.tsx"
        ]
      }
    },
    {
      "id": "10.4",
      "epic": "UI: Consolidation",
      "title": "Elimination rules editor",
      "priority": "P2",
      "status": "pending",
      "depends_on": ["2.3", "10.2"],
      "description": "Create and manage elimination rules.",
      "specs": ["UI_ARCHITECTURE.md", "ACCOUNTING_RESEARCH.md", "REACT_BEST_PRACTICES.md", "E2E_TESTING.md"],
      "acceptance_criteria": [
        "MUST use AppLayout via layout route",
        "Rules list with filters",
        "Create/edit/delete rules",
        "E2E test: Elimination rules CRUD"
      ],
      "api": {
        "calls": [
          "GET /api/v1/elimination-rules?groupId=:id",
          "POST /api/v1/elimination-rules",
          "PUT /api/v1/elimination-rules/:id",
          "DELETE /api/v1/elimination-rules/:id"
        ]
      },
      "files": {
        "create": ["packages/web/src/routes/organizations/$organizationId/consolidation/$groupId/elimination-rules/index.tsx"]
      }
    },
    {
      "id": "11.1",
      "epic": "UI: Intercompany",
      "title": "Intercompany transactions",
      "priority": "P2",
      "status": "pending",
      "depends_on": ["2.3"],
      "description": "Track and reconcile intercompany transactions.",
      "specs": ["UI_ARCHITECTURE.md", "ACCOUNTING_RESEARCH.md", "REACT_BEST_PRACTICES.md", "E2E_TESTING.md"],
      "acceptance_criteria": [
        "MUST use AppLayout via layout route",
        "Transactions list with filters",
        "Summary cards",
        "Create/update transactions",
        "E2E test: Intercompany reconciliation"
      ],
      "api": {
        "calls": [
          "GET /api/v1/intercompany-transactions?organizationId=:id",
          "POST /api/v1/intercompany-transactions",
          "PUT /api/v1/intercompany-transactions/:id"
        ]
      },
      "files": {
        "create": [
          "packages/web/src/routes/organizations/$organizationId/intercompany/index.tsx",
          "packages/web/src/components/intercompany/IntercompanyTransactionForm.tsx"
        ]
      }
    },
    {
      "id": "12.1",
      "epic": "UI: Audit Log",
      "title": "Audit log viewer",
      "priority": "P2",
      "status": "pending",
      "depends_on": ["2.3"],
      "description": "View audit trail for compliance.",
      "specs": ["UI_ARCHITECTURE.md", "REACT_BEST_PRACTICES.md", "E2E_TESTING.md"],
      "acceptance_criteria": [
        "MUST use AppLayout via layout route",
        "Table: Timestamp, User, Entity Type, Entity ID, Action, Changes",
        "Filters by entity type, user, action, date range",
        "Expandable rows for change details",
        "Pagination",
        "Export to CSV",
        "E2E test: Audit log filters"
      ],
      "api": {
        "calls": ["GET /api/v1/audit-log?entityType=:type&userId=:id&action=:action&fromDate=:date&toDate=:date"]
      },
      "files": {
        "create": [
          "packages/web/src/routes/organizations/$organizationId/audit-log/index.tsx",
          "packages/web/src/components/audit/AuditLogTable.tsx",
          "packages/web/src/components/audit/AuditEntryDetail.tsx"
        ]
      }
    }
  ]
}
